{"version":3,"sources":["../src/component/TextIgniterComponent.ts"],"sourcesContent":["import { TextIgniter } from '@mindfiredigital/textigniter/dist/TextIgniter.js';\r\n\r\nexport class TextIgniterComponent extends HTMLElement {\r\n  private textIgniter!: TextIgniter;\r\n  private initialized = false;\r\n  private config = {};\r\n  private template = `<div id=\"editor-container\"></div>`;\r\n\r\n  constructor() {\r\n    super();\r\n    if (!this.firstElementChild) {\r\n      this.innerHTML = this.template;\r\n    }\r\n  }\r\n\r\n  static get observedAttributes() {\r\n    return ['config'];\r\n  }\r\n\r\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\r\n    if (name === 'config' && newValue !== oldValue) {\r\n      try {\r\n        console.log(newValue);\r\n        const parsedConfig = JSON.parse(newValue);\r\n        this.config = parsedConfig;\r\n        this.initializeEditor(); // Reinitialize Core when config changes\r\n      } catch (e) {\r\n        console.error('Failed to parse config: ', e);\r\n      }\r\n    }\r\n  }\r\n\r\n  connectedCallback() {\r\n    if (this.initialized) {\r\n      return;\r\n    }\r\n    this.initializeEditor();\r\n  }\r\n\r\n  private initializeEditor() {\r\n    if (this.initialized) {\r\n      return;\r\n    }\r\n\r\n    const editorContainer = this.querySelector('#editor-container')?.id;\r\n    if (!editorContainer) {\r\n      console.error('Editor element not found inside the DOM.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.initialized = true;\r\n      this.textIgniter = new TextIgniter(\r\n        editorContainer as any,\r\n        this.config as any\r\n      );\r\n\r\n      // Subscribe to content changes and dispatch custom event\r\n      this.textIgniter.onContentChange((data) => {\r\n        const event = new CustomEvent('content-change', {\r\n          detail: data,\r\n          bubbles: true,\r\n          composed: true\r\n        });\r\n        this.dispatchEvent(event);\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to initialize TextIgniter:', error);\r\n      this.initialized = false;\r\n    }\r\n  }\r\n}\r\n\r\nif (!customElements.get('text-igniter')) {\r\n  customElements.define('text-igniter', TextIgniterComponent);\r\n}\r\n"],"mappings":";AAAA,SAAS,mBAAmB;AAErB,IAAM,uBAAN,cAAmC,YAAY;AAAA,EAMpD,cAAc;AACZ,UAAM;AALR,SAAQ,cAAc;AACtB,SAAQ,SAAS,CAAC;AAClB,SAAQ,WAAW;AAIjB,QAAI,CAAC,KAAK,mBAAmB;AAC3B,WAAK,YAAY,KAAK;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,WAAW,qBAAqB;AAC9B,WAAO,CAAC,QAAQ;AAAA,EAClB;AAAA,EAEA,yBAAyB,MAAc,UAAkB,UAAkB;AACzE,QAAI,SAAS,YAAY,aAAa,UAAU;AAC9C,UAAI;AACF,gBAAQ,IAAI,QAAQ;AACpB,cAAM,eAAe,KAAK,MAAM,QAAQ;AACxC,aAAK,SAAS;AACd,aAAK,iBAAiB;AAAA,MACxB,SAAS,GAAG;AACV,gBAAQ,MAAM,4BAA4B,CAAC;AAAA,MAC7C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,QAAI,KAAK,aAAa;AACpB;AAAA,IACF;AACA,SAAK,iBAAiB;AAAA,EACxB;AAAA,EAEQ,mBAAmB;AAvC7B;AAwCI,QAAI,KAAK,aAAa;AACpB;AAAA,IACF;AAEA,UAAM,mBAAkB,UAAK,cAAc,mBAAmB,MAAtC,mBAAyC;AACjE,QAAI,CAAC,iBAAiB;AACpB,cAAQ,MAAM,0CAA0C;AACxD;AAAA,IACF;AAEA,QAAI;AACF,WAAK,cAAc;AACnB,WAAK,cAAc,IAAI;AAAA,QACrB;AAAA,QACA,KAAK;AAAA,MACP;AAGA,WAAK,YAAY,gBAAgB,CAAC,SAAS;AACzC,cAAM,QAAQ,IAAI,YAAY,kBAAkB;AAAA,UAC9C,QAAQ;AAAA,UACR,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AACD,aAAK,cAAc,KAAK;AAAA,MAC1B,CAAC;AAAA,IACH,SAAS,OAAO;AACd,cAAQ,MAAM,qCAAqC,KAAK;AACxD,WAAK,cAAc;AAAA,IACrB;AAAA,EACF;AACF;AAEA,IAAI,CAAC,eAAe,IAAI,cAAc,GAAG;AACvC,iBAAe,OAAO,gBAAgB,oBAAoB;AAC5D;","names":[]}