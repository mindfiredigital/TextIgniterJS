{"version":3,"sources":["../src/index.ts","../../core/dist/utils/events.js","../../core/dist/piece.js","../../core/dist/textDocument.js","../../core/dist/utils/selectionManager.js","../../core/dist/utils/urlDetector.js","../../core/dist/view/editorView.js","../../core/dist/view/toolbarView.js","../../core/dist/constants/strings.js","../../core/dist/handlers/hyperlink.js","../../core/dist/utils/parseHtml.js","../../core/dist/assets/icons.ts","../../core/dist/config/editorConfig.js","#style-inject:#style-inject","../../core/dist/styles/text-igniter.css","../../core/dist/HtmlToJsonParser.js","../../core/dist/handlers/image.js","../../core/dist/handlers/undoRedoManager.js","../../core/dist/view/popupToolbarView.js","../../core/dist/view/linkPopupView.js","../../core/dist/TextIgniter.js","../src/component/TextIgniterComponent.ts"],"sourcesContent":["export * from './component/TextIgniterComponent'","class EventEmitter {\n    constructor() {\n        this.events = {};\n    }\n    on(event, listener) {\n        if (!this.events[event])\n            this.events[event] = [];\n        this.events[event].push(listener);\n    }\n    emit(event, data) {\n        if (this.events[event]) {\n            this.events[event].forEach(listener => listener(data));\n        }\n    }\n}\nexport default EventEmitter;\n","class Piece {\n    constructor(text, attributes = {}) {\n        this.text = text;\n        const fontFamilySelect = document.getElementById('fontFamily');\n        const fontSizeSelect = document.getElementById('fontSize');\n        let selectedFontFamilyValue = 'Arial';\n        let selectedFontSizeValue = '16px';\n        let selectedFontColor = document.getElementById('fontColorPicker');\n        let selectedBgColor = document.getElementById('bgColorPicker');\n        if (fontFamilySelect) {\n            selectedFontFamilyValue = fontFamilySelect.value;\n        }\n        if (fontSizeSelect) {\n            selectedFontSizeValue = fontSizeSelect.value;\n        }\n        const fontColorValue = attributes.fontColor ||\n            (selectedFontColor ? selectedFontColor.value : '#000000');\n        const bgColorValue = attributes.bgColor ||\n            (selectedBgColor ? selectedBgColor.value : '#ffffff');\n        this.attributes = {\n            bold: attributes.bold || false,\n            italic: attributes.italic || false,\n            underline: attributes.underline || false,\n            strikethrough: attributes.strikethrough || false,\n            undo: attributes.undo || false,\n            redo: attributes.redo || false,\n            fontFamily: attributes.fontFamily || selectedFontFamilyValue,\n            fontSize: attributes.fontSize || selectedFontSizeValue,\n            hyperlink: attributes.hyperlink || false,\n            fontColor: fontColorValue,\n            bgColor: bgColorValue,\n        };\n    }\n    isBold() {\n        return this.attributes.bold;\n    }\n    setBold(v) {\n        this.attributes.bold = v;\n    }\n    isItalic() {\n        return this.attributes.italic;\n    }\n    isUndo() {\n        return this.attributes.undo;\n    }\n    isRedo() {\n        return this.attributes.redo;\n    }\n    setItalic(v) {\n        this.attributes.italic = v;\n    }\n    isUnderline() {\n        return this.attributes.underline;\n    }\n    setUnderline(v) {\n        this.attributes.underline = v;\n    }\n    isStrikethrough() {\n        return this.attributes.strikethrough || false;\n    }\n    setStrikethrough(v) {\n        this.attributes.strikethrough = v;\n    }\n    setUndo(v) {\n        this.attributes.undo = v;\n    }\n    setRedo(v) {\n        this.attributes.redo = v;\n    }\n    clone() {\n        return new Piece(this.text, Object.assign({}, this.attributes));\n    }\n    hasSameAttributes(other) {\n        return (this.attributes.bold === other.attributes.bold &&\n            this.attributes.italic === other.attributes.italic &&\n            this.attributes.underline === other.attributes.underline &&\n            (this.attributes.strikethrough || false) ===\n                (other.attributes.strikethrough || false) &&\n            this.attributes.undo === other.attributes.undo &&\n            this.attributes.redo === other.attributes.redo &&\n            this.attributes.fontFamily === other.attributes.fontFamily &&\n            this.attributes.fontSize === other.attributes.fontSize &&\n            this.attributes.italic === other.attributes.italic &&\n            this.attributes.underline === other.attributes.underline &&\n            this.attributes.hyperlink === other.attributes.hyperlink &&\n            this.attributes.fontColor === other.attributes.fontColor &&\n            this.attributes.bgColor === other.attributes.bgColor);\n    }\n    getHyperlink() {\n        return this.attributes.hyperlink || false;\n    }\n    setHyperlink(url) {\n        this.attributes.hyperlink = url;\n    }\n}\nexport default Piece;\n","import EventEmitter from './utils/events';\nimport Piece from './piece';\nclass TextDocument extends EventEmitter {\n    get selectedBlockId() {\n        return this._selectedBlockId;\n    }\n    set selectedBlockId(value) {\n        if (this._selectedBlockId !== value) {\n            this._selectedBlockId = value;\n            const editorOffset = this.getCursorOffset(document.querySelector('[id=\"editor\"]'));\n            const paraOffset = this.getCursorOffset(document.querySelector('[data-id=\"' + value + '\"]'));\n            this.currentOffset = editorOffset - paraOffset;\n        }\n    }\n    constructor() {\n        super();\n        this.dataIds = [];\n        this.selectAll = false;\n        this._selectedBlockId = null;\n        this.pieces = [new Piece('')];\n        this.blocks = [\n            {\n                type: 'text',\n                dataId: 'data-id-1734604240404',\n                class: 'paragraph-block',\n                alignment: 'left',\n                pieces: [new Piece('\\u200B')],\n            },\n        ];\n        this.selectedBlockId = 'data-id-1734604240404';\n        this.currentOffset = 0;\n    }\n    setEditorView(editorView) {\n        this.editorView = editorView;\n    }\n    getPlainText() {\n        return this.pieces.map(p => p.text).join('');\n    }\n    setUndoRedoManager(undoRedoManager) {\n        this.undoRedoManager = undoRedoManager;\n    }\n    insertAt(text, attributes, position, dataId = '', currentOffset = 0, id = '', actionType = '', isSynthetic = false) {\n        if (!isSynthetic && actionType !== 'batch') {\n            this.undoRedoManager.saveUndoSnapshot();\n        }\n        console.log('inserted,', { start: position, text });\n        console.log('inserted,', this.blocks);\n        let offset = 0;\n        let newPieces = [];\n        let inserted = false;\n        let index = 0;\n        if (dataId !== '' && dataId !== null) {\n            index = this.blocks.findIndex((block) => block.dataId === dataId);\n            offset = this.currentOffset;\n        }\n        for (let piece of this.blocks[index].pieces) {\n            const pieceEnd = offset + piece.text.length;\n            if (!inserted && position <= pieceEnd) {\n                const relPos = position - offset;\n                if (relPos > 0) {\n                    newPieces.push(new Piece(piece.text.slice(0, relPos), Object.assign({}, piece.attributes)));\n                }\n                newPieces.push(new Piece(text, {\n                    bold: attributes.bold || false,\n                    italic: attributes.italic || false,\n                    underline: attributes.underline || false,\n                    strikethrough: attributes.strikethrough || false,\n                    hyperlink: attributes.hyperlink || false,\n                }));\n                if (relPos < piece.text.length) {\n                    newPieces.push(new Piece(piece.text.slice(relPos), Object.assign({}, piece.attributes)));\n                }\n                inserted = true;\n            }\n            else {\n                newPieces.push(piece.clone());\n            }\n            offset = pieceEnd;\n        }\n        if (!inserted) {\n            const lastPiece = newPieces[newPieces.length - 1];\n            if (lastPiece &&\n                lastPiece.hasSameAttributes(new Piece('', {\n                    bold: attributes.bold || false,\n                    italic: attributes.italic || false,\n                    underline: attributes.underline || false,\n                    strikethrough: attributes.strikethrough || false,\n                    hyperlink: attributes.hyperlink || false,\n                }))) {\n                lastPiece.text += text;\n            }\n            else {\n                newPieces.push(new Piece(text, {\n                    bold: attributes.bold || false,\n                    italic: attributes.italic || false,\n                    underline: attributes.underline || false,\n                    strikethrough: attributes.strikethrough || false,\n                    hyperlink: attributes.hyperlink || false,\n                }));\n            }\n        }\n        let _data = this.mergePieces(newPieces);\n        this.blocks[index].pieces = _data;\n        console.log({ position });\n        this.emit('documentChanged', this);\n    }\n    deleteRange(start, end, dataId = '', currentOffset = 0, isBackspace = false) {\n        console.log('deleted2,', { start, end });\n        if (start === end)\n            return;\n        let newPieces = [];\n        let offset = 0;\n        let index = 0;\n        let runBackspace = false;\n        if (dataId !== '' && dataId !== null) {\n            index = this.blocks.findIndex((block) => block.dataId === dataId);\n            if (index === -1)\n                return;\n            offset = currentOffset;\n        }\n        let previousTextBlockIndex = -1;\n        if (isBackspace &&\n            start === offset &&\n            index > 0 &&\n            end ===\n                start) {\n            if (index - 1 >= 0 && this.blocks[index - 1].type === 'image') {\n                previousTextBlockIndex = index - 2;\n            }\n            else {\n                previousTextBlockIndex = index - 1;\n            }\n            if (previousTextBlockIndex >= 0 && this.blocks[previousTextBlockIndex]) {\n                for (let piece1 of this.blocks[previousTextBlockIndex].pieces) {\n                    newPieces.push(piece1.clone());\n                    runBackspace = true;\n                }\n            }\n        }\n        for (let piece of this.blocks[index].pieces) {\n            const pieceEnd = offset + piece.text.length;\n            const pieceStart = offset;\n            if (pieceEnd <= start || pieceStart >= end) {\n                newPieces.push(piece.clone());\n            }\n            else {\n                const pieceText = piece.text;\n                if (start > pieceStart) {\n                    const beforeText = pieceText.slice(0, start - pieceStart);\n                    if (beforeText.length > 0) {\n                        newPieces.push(new Piece(beforeText, Object.assign({}, piece.attributes)));\n                    }\n                }\n                if (end < pieceEnd) {\n                    const afterText = pieceText.slice(end - pieceStart);\n                    if (afterText.length > 0) {\n                        newPieces.push(new Piece(afterText, Object.assign({}, piece.attributes)));\n                    }\n                }\n            }\n            offset = pieceEnd;\n        }\n        let _data = this.mergePieces(newPieces);\n        let listItemDeleted = false;\n        if (runBackspace && previousTextBlockIndex >= 0) {\n            if (this.blocks[index] &&\n                (this.blocks[index].listType === 'ol' ||\n                    this.blocks[index].listType === 'li')) {\n                listItemDeleted = true;\n            }\n            this.blocks[previousTextBlockIndex].pieces = _data;\n            this.blocks.splice(index, 1);\n        }\n        else {\n            if (_data.length === 0) {\n                if (this.blocks.length > 1) {\n                    if (this.blocks[index] &&\n                        (this.blocks[index].listType === 'ol' ||\n                            this.blocks[index].listType === 'li')) {\n                        listItemDeleted = true;\n                    }\n                    this.blocks.splice(index, 1);\n                }\n                else {\n                    _data = [new Piece(' ')];\n                    this.blocks[index].pieces = _data;\n                }\n            }\n            else {\n                this.blocks[index].pieces = _data;\n            }\n        }\n        if (listItemDeleted) {\n            this.updateOrderedListNumbers();\n        }\n        this.emit('documentChanged', this);\n    }\n    deleteBlocks() {\n        const listItemsDeleted = this.blocks.some((block) => {\n            return (this.dataIds.includes(block.dataId) &&\n                (block.listType === 'ol' || block.listType === 'li'));\n        });\n        this.blocks = this.blocks.filter((block) => {\n            if (!this.dataIds.includes(block.dataId)) {\n                return block;\n            }\n        });\n        this.dataIds = [];\n        this.selectAll = false;\n        if (this.blocks.length === 0) {\n            this.blocks.push({\n                dataId: `data-id-${Date.now()}`,\n                class: 'paragraph-block',\n                type: 'text',\n                pieces: [new Piece('\\u200B')],\n            });\n        }\n        if (listItemsDeleted) {\n            this.updateOrderedListNumbers();\n        }\n        this.emit('documentChanged', this);\n    }\n    getSelectedTextDataId() {\n        const selection = window.getSelection();\n        if (!selection || selection.rangeCount === 0) {\n            return null;\n        }\n        const range = selection.getRangeAt(0);\n        const container = range.startContainer;\n        const elementWithId = (container.nodeType === Node.TEXT_NODE\n            ? container.parentElement\n            : container);\n        const dataIdElement = elementWithId.closest('[data-id]');\n        return (dataIdElement === null || dataIdElement === void 0 ? void 0 : dataIdElement.getAttribute('data-id')) || null;\n    }\n    getAllSelectedDataIds() {\n        var _a;\n        const selection = window.getSelection();\n        if (!selection || selection.rangeCount === 0) {\n            return [];\n        }\n        const range = selection.getRangeAt(0);\n        const selectedIds = [];\n        const iterator = document.createNodeIterator(range.commonAncestorContainer, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT);\n        let currentNode;\n        while ((currentNode = iterator.nextNode())) {\n            if (range.intersectsNode(currentNode)) {\n                const element = currentNode.nodeType === Node.TEXT_NODE\n                    ? currentNode.parentElement\n                    : currentNode;\n                const dataId = (_a = element === null || element === void 0 ? void 0 : element.closest('[data-id]')) === null || _a === void 0 ? void 0 : _a.getAttribute('data-id');\n                if (dataId && !selectedIds.includes(dataId)) {\n                    selectedIds.push(dataId);\n                }\n            }\n        }\n        this.removeExclusiveEndBlock(range, selectedIds);\n        this.dataIds = selectedIds;\n        console.log('selected id 3', this.dataIds, selectedIds);\n        return selectedIds;\n    }\n    handleCtrlASelection() {\n        const selectedDataIds = [];\n        const editor = document.getElementById('editor');\n        if (editor) {\n            const childNodes = editor.querySelectorAll('[data-id]');\n            childNodes.forEach(node => {\n                const dataId = node.getAttribute('data-id');\n                if (dataId && !selectedDataIds.includes(dataId)) {\n                    selectedDataIds.push(dataId);\n                }\n            });\n        }\n        this.dataIds = selectedDataIds;\n        console.log('selected id 2', this.dataIds, selectedDataIds);\n        return selectedDataIds;\n    }\n    getSelectedDataIds() {\n        const selection = window.getSelection();\n        if (!selection || selection.rangeCount === 0) {\n            return [];\n        }\n        const range = selection.getRangeAt(0);\n        const selectedIds = [];\n        const startContainer = range.startContainer;\n        const endContainer = range.endContainer;\n        const startDataId = this.getDataIdFromNode(startContainer);\n        const endDataId = this.getDataIdFromNode(endContainer);\n        if (startDataId && !selectedIds.includes(startDataId)) {\n            selectedIds.push(startDataId);\n        }\n        if (endDataId && !selectedIds.includes(endDataId)) {\n            selectedIds.push(endDataId);\n        }\n        this.removeExclusiveEndBlock(range, selectedIds);\n        this.dataIds = selectedIds;\n        console.log('selected id 1', this.dataIds, selectedIds);\n        return selectedIds;\n    }\n    getDataIdFromNode(node) {\n        var _a;\n        const element = node.nodeType === Node.TEXT_NODE\n            ? node.parentElement\n            : node;\n        return ((_a = element === null || element === void 0 ? void 0 : element.closest('[data-id]')) === null || _a === void 0 ? void 0 : _a.getAttribute('data-id')) || null;\n    }\n    getCursorOffset(container) {\n        const selection = window.getSelection();\n        if (!selection || selection.rangeCount === 0) {\n            return -1;\n        }\n        const range = selection.getRangeAt(0);\n        let offset = 0;\n        const traverseNodes = (node) => {\n            if (node === range.startContainer) {\n                offset += range.startOffset;\n                return true;\n            }\n            if (node.nodeType === Node.TEXT_NODE) {\n                offset += (node.textContent || '').length;\n            }\n            for (const child of Array.from(node.childNodes)) {\n                if (traverseNodes(child)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        traverseNodes(container);\n        return offset;\n    }\n    formatAttribute(start, end, attribute, value) {\n        console.log('formatAttribute', start, end, attribute, value);\n        let newPieces = [];\n        let offset = 0;\n        let index = -1;\n        if (this.selectedBlockId !== '' && this.selectedBlockId !== null) {\n            index = this.blocks.findIndex((block) => block.dataId === this.selectedBlockId);\n            if (index === -1)\n                return;\n            offset = this.currentOffset;\n        }\n        for (let piece of this.blocks[index].pieces) {\n            const pieceEnd = offset + piece.text.length;\n            if (pieceEnd <= start || offset >= end) {\n                newPieces.push(piece.clone());\n            }\n            else {\n                const pieceStart = offset;\n                const pieceText = piece.text;\n                const startInPiece = Math.max(start - pieceStart, 0);\n                const endInPiece = Math.min(end - pieceStart, pieceText.length);\n                if (startInPiece > 0) {\n                    newPieces.push(new Piece(pieceText.slice(0, startInPiece), Object.assign({}, piece.attributes)));\n                }\n                const selectedPiece = new Piece(pieceText.slice(startInPiece, endInPiece), Object.assign({}, piece.attributes));\n                if ((attribute === 'bold' ||\n                    attribute === 'italic' ||\n                    attribute === 'underline' ||\n                    attribute === 'strikethrough' ||\n                    attribute === 'undo' ||\n                    attribute === 'redo' ||\n                    attribute === 'hyperlink') &&\n                    typeof value === 'boolean') {\n                    selectedPiece.attributes[attribute] = value;\n                }\n                else if ((attribute === 'fontFamily' ||\n                    attribute === 'fontSize' ||\n                    attribute === 'hyperlink' ||\n                    attribute === 'fontColor' ||\n                    attribute === 'bgColor') &&\n                    typeof value === 'string') {\n                    selectedPiece.attributes[attribute] = value;\n                }\n                newPieces.push(selectedPiece);\n                if (endInPiece < pieceText.length) {\n                    newPieces.push(new Piece(pieceText.slice(endInPiece), Object.assign({}, piece.attributes)));\n                }\n            }\n            offset = pieceEnd;\n        }\n        const _data = this.mergePieces(newPieces);\n        this.blocks[index].pieces = _data;\n        this.emit('documentChanged', this);\n    }\n    toggleOrderedList(dataId, id = '') {\n        const index = this.blocks.findIndex((block) => block.dataId === dataId);\n        if (index === -1)\n            return;\n        const block = this.blocks[index];\n        if (block.listType === 'ol' || block.listType === 'li') {\n            block.listType = null;\n            block.listStart = undefined;\n            block.parentId = undefined;\n        }\n        else {\n            block.listType = 'ol';\n            block.listStart = 1;\n            block.parentId = block.dataId;\n        }\n        this.updateOrderedListNumbers();\n        this.emit('documentChanged', this);\n    }\n    toggleOrderedListForMultipleBlocks(dataIds) {\n        if (dataIds.length === 0)\n            return;\n        const sortedDataIds = dataIds.sort((a, b) => {\n            const indexA = this.blocks.findIndex((block) => block.dataId === a);\n            const indexB = this.blocks.findIndex((block) => block.dataId === b);\n            return indexA - indexB;\n        });\n        const allAreOrderedLists = sortedDataIds.every(dataId => {\n            const block = this.blocks.find((block) => block.dataId === dataId);\n            return block && (block.listType === 'ol' || block.listType === 'li');\n        });\n        if (allAreOrderedLists) {\n            sortedDataIds.forEach(dataId => {\n                const block = this.blocks.find((block) => block.dataId === dataId);\n                if (block) {\n                    block.listType = null;\n                    block.listStart = undefined;\n                    block.parentId = undefined;\n                }\n            });\n        }\n        else {\n            const firstBlockId = sortedDataIds[0];\n            sortedDataIds.forEach((dataId, index) => {\n                const block = this.blocks.find((block) => block.dataId === dataId);\n                if (block) {\n                    if (index === 0) {\n                        block.listType = 'ol';\n                        block.listStart = 1;\n                        block.parentId = firstBlockId;\n                    }\n                    else {\n                        block.listType = 'li';\n                        block.listStart = index + 1;\n                        block.parentId = firstBlockId;\n                    }\n                }\n            });\n        }\n        this.updateOrderedListNumbers();\n        this.emit('documentChanged', this);\n    }\n    toggleUnorderedList(dataId) {\n        const index = this.blocks.findIndex((block) => block.dataId === dataId);\n        if (index === -1)\n            return;\n        const block = this.blocks[index];\n        block.listType = block.listType === 'ul' ? null : 'ul';\n        this.emit('documentChanged', this);\n    }\n    updateOrderedListNumbers() {\n        let currentNumber = 1;\n        let currentParentId = null;\n        for (let i = 0; i < this.blocks.length; i++) {\n            const block = this.blocks[i];\n            if (block.listType === 'ol' || block.listType === 'li') {\n                const isNewListGroup = block.listType === 'ol' || block.parentId !== currentParentId;\n                if (isNewListGroup) {\n                    currentNumber = 1;\n                    currentParentId =\n                        block.listType === 'ol' ? block.dataId : block.parentId;\n                }\n                block.listStart = currentNumber;\n                currentNumber++;\n            }\n            else {\n                currentNumber = 1;\n                currentParentId = null;\n            }\n        }\n        this.emit('documentChanged', this);\n    }\n    undo() {\n        console.log('undo');\n        this.undoRedoManager.undo();\n    }\n    redo() {\n        this.undoRedoManager.redo();\n        console.log('redo');\n    }\n    setCursorPosition(position, dataId = '') {\n        var _a;\n        if (dataId !== '') {\n            const divDataid = document.querySelector(`[data-id=\"${dataId}\"]`);\n            if (divDataid) {\n                setTimeout(() => divDataid.focus(), 0);\n            }\n            else {\n                console.warn(`Element with data-id=\"${dataId}\" not found.`);\n                return;\n            }\n        }\n        else {\n            this.editorView.container.focus();\n        }\n        const sel = window.getSelection();\n        if (!sel)\n            return;\n        const range = document.createRange();\n        let charIndex = 0;\n        const nodeStack = [this.editorView.container];\n        let node;\n        const totalLength = ((_a = this.editorView.container.textContent) === null || _a === void 0 ? void 0 : _a.length) || 0;\n        if (position < 0 || position > totalLength)\n            return;\n        while ((node = nodeStack.pop())) {\n            if (node.nodeType === 3) {\n                const textNode = node;\n                const nextCharIndex = charIndex + textNode.length;\n                if (position >= charIndex && position <= nextCharIndex) {\n                    range.setStart(textNode, Math.min(position - charIndex, textNode.length));\n                    range.collapse(true);\n                    break;\n                }\n                charIndex = nextCharIndex;\n            }\n            else if (node.tagName === 'BR') {\n                if (position === charIndex) {\n                    range.setStartBefore(node);\n                    range.collapse(true);\n                    break;\n                }\n                charIndex++;\n            }\n            else {\n                const el = node;\n                let i = el.childNodes.length;\n                while (i--) {\n                    nodeStack.push(el.childNodes[i]);\n                }\n            }\n        }\n        sel.removeAllRanges();\n        sel.addRange(range);\n    }\n    toggleBoldRange(start, end, id = '') {\n        const allBold = this.isRangeEntirelyAttribute(start, end, 'bold');\n        this.formatAttribute(start, end, 'bold', !allBold);\n    }\n    toggleItalicRange(start, end, id = '') {\n        const allItalic = this.isRangeEntirelyAttribute(start, end, 'italic');\n        this.formatAttribute(start, end, 'italic', !allItalic);\n    }\n    toggleUnderlineRange(start, end, id = '') {\n        const allUnderline = this.isRangeEntirelyAttribute(start, end, 'underline');\n        this.formatAttribute(start, end, 'underline', !allUnderline);\n    }\n    toggleStrikethroughRange(start, end, id = '') {\n        const allStrike = this.isRangeEntirelyAttribute(start, end, 'strikethrough');\n        this.formatAttribute(start, end, 'strikethrough', !allStrike);\n    }\n    toggleUndoRange(start, end, id = '') {\n        const allUndo = this.isRangeEntirelyAttribute(start, end, 'undo');\n        this.formatAttribute(start, end, 'undo', !allUndo);\n    }\n    toggleRedoRange(start, end) {\n        const allRedo = this.isRangeEntirelyAttribute(start, end, 'redo');\n        this.formatAttribute(start, end, 'redo', !allRedo);\n    }\n    applyFontColor(start, end, color, id = '') {\n        if (start < end) {\n            this.formatAttribute(start, end, 'fontColor', color);\n            console.log('applyFontColor-color', color, start, end);\n        }\n    }\n    applyBgColor(start, end, color, id = '') {\n        if (start < end) {\n            this.formatAttribute(start, end, 'bgColor', color);\n        }\n    }\n    isRangeEntirelyAttribute(start, end, attr) {\n        let offset = this.currentOffset;\n        let allHaveAttr = true;\n        if (this.selectedBlockId !== '' && this.selectedBlockId !== null) {\n            const index = this.blocks.findIndex((block) => block.dataId === this.selectedBlockId);\n            if (index === -1)\n                return false;\n            for (let piece of this.blocks[index].pieces) {\n                const pieceEnd = offset + piece.text.length;\n                if (pieceEnd > start && offset < end) {\n                    if (!piece.attributes[attr]) {\n                        allHaveAttr = false;\n                        break;\n                    }\n                }\n                offset = pieceEnd;\n            }\n        }\n        return allHaveAttr;\n    }\n    mergePieces(pieces) {\n        let merged = [];\n        for (let p of pieces) {\n            const last = merged[merged.length - 1];\n            if (last && last.hasSameAttributes(p)) {\n                last.text += p.text;\n            }\n            else {\n                merged.push(p);\n            }\n        }\n        return merged;\n    }\n    findPieceAtOffset(offset, dataId = '') {\n        let currentOffset = 0;\n        if (dataId !== '' && dataId !== null) {\n            for (let block of this.blocks) {\n                const blockLength = block.pieces.reduce((acc, curr) => acc + curr.text.length, 0);\n                if (block.dataId == dataId) {\n                    let prevPiece = null;\n                    for (let piece of block.pieces) {\n                        const pieceStart = currentOffset;\n                        const pieceEnd = pieceStart + piece.text.length;\n                        if (offset >= pieceStart && offset < pieceEnd) {\n                            return offset === pieceStart && prevPiece ? prevPiece : piece;\n                        }\n                        prevPiece = piece;\n                        currentOffset = pieceEnd;\n                    }\n                }\n                else {\n                    currentOffset += blockLength;\n                }\n            }\n        }\n        return null;\n    }\n    setFontFamily(start, end, fontFamily) {\n        this.formatAttribute(start, end, 'fontFamily', fontFamily);\n    }\n    setFontSize(start, end, fontSize) {\n        this.formatAttribute(start, end, 'fontSize', fontSize);\n    }\n    setAlignment(alignment, dataId) {\n        const block = this.blocks.find((block) => block.dataId === dataId);\n        if (!block)\n            return;\n        block.alignment = alignment;\n        this.emit('documentChanged', this);\n    }\n    getHtmlContent(copyToClipboard = false) {\n        const editorContainer = document.getElementById('editor');\n        if (!editorContainer) {\n            console.error('Editor container not found.');\n            return;\n        }\n        const htmlContent = editorContainer.innerHTML;\n        if (copyToClipboard) {\n            navigator.clipboard\n                .writeText(htmlContent)\n                .then(() => {\n                console.log('HTML copied to clipboard!');\n            })\n                .catch(err => console.error('Failed to copy HTML:', err));\n        }\n        return htmlContent;\n    }\n    getCursorOffsetInParent(parentSelector) {\n        var _a;\n        console.log('textPosition -1:vicky', parentSelector);\n        const parentElement = document.querySelector(parentSelector);\n        if (!parentElement)\n            return null;\n        const selection = window.getSelection();\n        if (!selection || selection.rangeCount === 0)\n            return null;\n        const range = selection.getRangeAt(0);\n        if (!parentElement.contains(range.startContainer))\n            return null;\n        let offset = 0;\n        let targetNode = null;\n        const walker = document.createTreeWalker(parentElement, NodeFilter.SHOW_TEXT, null);\n        let matchedChild = null;\n        while (walker.nextNode()) {\n            const currentNode = walker.currentNode;\n            console.log(currentNode, 'textPosition - currentNode: vicky');\n            if (currentNode === range.startContainer) {\n                offset += range.startOffset;\n                targetNode = currentNode;\n                matchedChild = currentNode.parentElement;\n                break;\n            }\n            else {\n                offset += ((_a = currentNode.textContent) === null || _a === void 0 ? void 0 : _a.length) || 0;\n            }\n        }\n        console.log({\n            offset,\n            childNode: targetNode,\n            innerHTML: matchedChild.innerHTML,\n            innerText: matchedChild.innerText,\n        }, 'textPosition - return values: vicky');\n        return {\n            offset,\n            childNode: targetNode,\n            innerHTML: matchedChild.innerHTML,\n            innerText: matchedChild.innerText,\n        };\n    }\n    removeExclusiveEndBlock(range, ids) {\n        if (ids.length <= 1)\n            return;\n        const endNode = range.endContainer;\n        const endOffset = range.endOffset;\n        let atStartOfContainer = false;\n        if (endNode.nodeType === Node.TEXT_NODE) {\n            atStartOfContainer = endOffset === 0;\n        }\n        else if (endNode.nodeType === Node.ELEMENT_NODE) {\n            atStartOfContainer = endOffset === 0;\n        }\n        if (!atStartOfContainer)\n            return;\n        const endBlockId = this.getDataIdFromNode(endNode);\n        if (!endBlockId)\n            return;\n        const startBlockId = this.getDataIdFromNode(range.startContainer);\n        if (endBlockId !== startBlockId && ids.includes(endBlockId)) {\n            const idx = ids.lastIndexOf(endBlockId);\n            if (idx > -1)\n                ids.splice(idx, 1);\n        }\n    }\n}\nexport default TextDocument;\n","export function saveSelection(container) {\n    const selection = window.getSelection();\n    if (!selection || selection.rangeCount === 0)\n        return null;\n    const range = selection.getRangeAt(0);\n    const preSelectionRange = range.cloneRange();\n    preSelectionRange.selectNodeContents(container);\n    preSelectionRange.setEnd(range.startContainer, range.startOffset);\n    const start = preSelectionRange.toString().length;\n    preSelectionRange.setEnd(range.endContainer, range.endOffset);\n    const end = preSelectionRange.toString().length;\n    return { start, end };\n}\nexport function restoreSelection(container, savedSel) {\n    if (!savedSel)\n        return;\n    let charIndex = 0;\n    const range = document.createRange();\n    range.setStart(container, 0);\n    range.collapse(true);\n    const nodeStack = [container];\n    let node;\n    let foundStart = false;\n    let stop = false;\n    while (!stop && (node = nodeStack.pop())) {\n        if (node.nodeType === 3) {\n            const textNode = node;\n            const nextCharIndex = charIndex + textNode.length;\n            if (!foundStart &&\n                savedSel.start >= charIndex &&\n                savedSel.start <= nextCharIndex) {\n                range.setStart(textNode, savedSel.start - charIndex);\n                foundStart = true;\n            }\n            if (foundStart &&\n                savedSel.end >= charIndex &&\n                savedSel.end <= nextCharIndex) {\n                range.setEnd(textNode, savedSel.end - charIndex);\n                stop = true;\n            }\n            charIndex = nextCharIndex;\n        }\n        else if (node.tagName === 'BR') {\n            if (!foundStart && savedSel.start === charIndex) {\n                range.setStartBefore(node);\n                foundStart = true;\n            }\n            if (foundStart && savedSel.end === charIndex) {\n                range.setEndBefore(node);\n                stop = true;\n            }\n            charIndex++;\n        }\n        else {\n            const el = node;\n            let i = el.childNodes.length;\n            while (i--) {\n                nodeStack.push(el.childNodes[i]);\n            }\n        }\n    }\n    const sel = window.getSelection();\n    if (!sel)\n        return;\n    sel.removeAllRanges();\n    sel.addRange(range);\n}\nexport function getSelectionRange(editorView) {\n    const sel = saveSelection(editorView.container);\n    if (!sel)\n        return [0, 0];\n    return [sel.start, sel.end];\n}\nexport function extractTextFromDataId(dataId, textDocument) {\n    const selection = window.getSelection();\n    if (!selection || selection.rangeCount === 0) {\n        return { remainingText: '', piece: null };\n    }\n    const range = selection.getRangeAt(0);\n    const cursorNode = range.startContainer;\n    let fText = '';\n    const _block = textDocument.blocks.filter((block) => {\n        if (block.dataId === dataId) {\n            return block;\n        }\n    });\n    if (!_block[0] || !_block[0].pieces) {\n        return { remainingText: '', piece: null };\n    }\n    const element = document.querySelector(`[data-id=\"${dataId}\"]`);\n    const textPosition = textDocument.getCursorOffsetInParent(`[data-id=\"${dataId}\"]`);\n    let _piece = [];\n    let index = 0;\n    _block[0].pieces.forEach((obj, i) => {\n        fText += obj.text;\n        if ((textPosition === null || textPosition === void 0 ? void 0 : textPosition.innerText) === obj.text) {\n            index = i;\n            _piece.push(obj);\n        }\n    });\n    if (_block[0].pieces.length > 1) {\n        _block[0].pieces.forEach((obj, i) => {\n            if (index < i) {\n                _piece.push(obj);\n            }\n        });\n    }\n    if (!element) {\n        console.error(`Element with data-id \"${dataId}\" not found.`);\n        return { remainingText: '', piece: null };\n    }\n    if (!element.contains(cursorNode)) {\n        console.error(`Cursor is not inside the element with data-id \"${dataId}\".`);\n        return { remainingText: '', piece: null };\n    }\n    const fullText = fText;\n    const cursorOffset = textPosition === null || textPosition === void 0 ? void 0 : textPosition.offset;\n    const remainingText = fullText.slice(cursorOffset);\n    const newContent = fullText.slice(0, cursorOffset);\n    element.textContent = newContent;\n    return { remainingText: remainingText, piece: _piece };\n}\nexport function addBlockAfter(data, targetDataId, newBlock) {\n    const targetIndex = data.findIndex(block => block.dataId === targetDataId);\n    if (targetIndex === -1) {\n        console.error(`Block with dataId \"${targetDataId}\" not found.`);\n        return data;\n    }\n    const updatedData = [\n        ...data.slice(0, targetIndex + 1),\n        newBlock,\n        ...data.slice(targetIndex + 1),\n    ];\n    return updatedData;\n}\n","const URL_REGEX = /((https?:\\/\\/|www\\.)[\\w\\-._~:\\/?#[\\]@!$&'()*+,;=%]+|\\b[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}(?:\\/[\\w\\-._~:\\/?#[\\]@!$&'()*+,;=%]*)?)/g;\nfunction isPartOfEmail(text, matchIndex) {\n    return matchIndex > 0 && text[matchIndex - 1] === '@';\n}\nexport function detectUrlsInText(text) {\n    const segments = [];\n    let lastIndex = 0;\n    let match;\n    while ((match = URL_REGEX.exec(text)) !== null) {\n        const matchIndex = match.index;\n        let urlText = match[0];\n        let trailing = '';\n        const trailingMatch = urlText.match(/[.,!?;:)\\]\\}\"']+$/);\n        if (trailingMatch) {\n            trailing = trailingMatch[0];\n            urlText = urlText.slice(0, -trailing.length);\n        }\n        if (isPartOfEmail(text, matchIndex)) {\n            continue;\n        }\n        if (matchIndex > lastIndex) {\n            segments.push({\n                text: text.substring(lastIndex, matchIndex),\n                isUrl: false,\n            });\n        }\n        let url = urlText;\n        if (!url.startsWith('http')) {\n            url = 'https://' + url;\n        }\n        segments.push({\n            text: urlText,\n            isUrl: true,\n            url: url,\n        });\n        if (trailing) {\n            segments.push({ text: trailing, isUrl: false });\n        }\n        lastIndex = matchIndex + match[0].length;\n    }\n    if (lastIndex < text.length) {\n        segments.push({\n            text: text.substring(lastIndex),\n            isUrl: false,\n        });\n    }\n    return segments;\n}\nexport function ensureProtocol(url) {\n    if (!url)\n        return url;\n    let trimmed = url.trim();\n    const accidentalPrefixMatch = trimmed.match(/^https?:\\/\\/[\\w.-]+(?::\\d+)?\\/(https?:\\/\\/.*)$/);\n    if (accidentalPrefixMatch) {\n        trimmed = accidentalPrefixMatch[1];\n    }\n    if (/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(trimmed)) {\n        return trimmed;\n    }\n    if (trimmed.startsWith('//')) {\n        return 'https:' + trimmed;\n    }\n    return 'https://' + trimmed;\n}\n","import { saveSelection, restoreSelection } from '../utils/selectionManager';\nimport { ensureProtocol } from '../utils/urlDetector';\nclass EditorView {\n    constructor(container, document) {\n        this.container = container;\n        this.document = document;\n    }\n    setImageHandler(imageHandler) {\n        this.imageHandler = imageHandler;\n    }\n    render() {\n        const savedSel = saveSelection(this.container);\n        this.container.innerHTML = '';\n        this.document.blocks.forEach((block) => {\n            var _a;\n            if (block.dataId !== '') {\n                let wrapperDiv;\n                if (block.type === 'image') {\n                    wrapperDiv = document.createElement('div');\n                    wrapperDiv.setAttribute('data-id', block.dataId);\n                    wrapperDiv.setAttribute('class', block.class);\n                    wrapperDiv.setAttribute('type', block.type);\n                    wrapperDiv.style.textAlign = block.alignment || 'left';\n                    if (block.image) {\n                        if (this.imageHandler &&\n                            typeof this.imageHandler.createImageFragment === 'function') {\n                            wrapperDiv.appendChild(this.imageHandler.createImageFragment(block.image, block.dataId));\n                        }\n                        else {\n                            const img = document.createElement('img');\n                            img.src = block.image;\n                            wrapperDiv.appendChild(img);\n                        }\n                    }\n                }\n                else {\n                    if (block.listType === 'ol' || block.listType === 'li') {\n                        wrapperDiv = document.createElement('ol');\n                        wrapperDiv.setAttribute('start', ((_a = block === null || block === void 0 ? void 0 : block.listStart) === null || _a === void 0 ? void 0 : _a.toString()) || '1');\n                    }\n                    else if (block.listType === 'ul') {\n                        wrapperDiv = document.createElement('ul');\n                    }\n                    else {\n                        wrapperDiv = document.createElement('div');\n                    }\n                    wrapperDiv.setAttribute('data-id', block.dataId);\n                    wrapperDiv.setAttribute('class', block.class);\n                    wrapperDiv.setAttribute('type', block.type);\n                    wrapperDiv.style.textAlign = block.alignment || 'left';\n                    if (Array.isArray(block.pieces)) {\n                        if (block.listType === 'ol' ||\n                            block.listType === 'ul' ||\n                            block.listType === 'li') {\n                            const li = document.createElement('li');\n                            block.pieces.forEach((piece) => {\n                                li.appendChild(this.renderPiece(piece));\n                            });\n                            wrapperDiv.appendChild(li);\n                        }\n                        else {\n                            block.pieces.forEach((piece) => {\n                                wrapperDiv.appendChild(this.renderPiece(piece));\n                            });\n                        }\n                    }\n                }\n                this.container.appendChild(wrapperDiv);\n            }\n        });\n        restoreSelection(this.container, savedSel);\n    }\n    renderPiece(piece) {\n        const lines = piece.text.split('\\n');\n        return this.wrapAttributes(lines, piece.attributes);\n    }\n    wrapAttributes(lines, attrs) {\n        const fragment = document.createDocumentFragment();\n        lines.forEach((line, index) => {\n            let textNode = document.createTextNode(line);\n            if (attrs.strikethrough) {\n                const s = document.createElement('s');\n                s.appendChild(textNode);\n                textNode = s;\n            }\n            if (attrs.underline) {\n                const u = document.createElement('u');\n                u.appendChild(textNode);\n                textNode = u;\n            }\n            if (attrs.italic) {\n                const em = document.createElement('em');\n                em.appendChild(textNode);\n                textNode = em;\n            }\n            if (attrs.bold) {\n                const strong = document.createElement('strong');\n                strong.appendChild(textNode);\n                textNode = strong;\n            }\n            const fontFamilySelect = document.getElementById('fontFamily');\n            const fontSizeSelect = document.getElementById('fontSize');\n            let selectedFontFamilyValue = 'Arial';\n            let selectedFontSizeValue = '16px';\n            if (fontFamilySelect) {\n                selectedFontFamilyValue = fontFamilySelect.value;\n            }\n            if (fontSizeSelect) {\n                selectedFontSizeValue = fontSizeSelect.value;\n            }\n            const span = document.createElement('span');\n            span.style.fontFamily = attrs.fontFamily || selectedFontFamilyValue;\n            span.style.fontSize = attrs.fontSize || selectedFontSizeValue;\n            if (attrs.fontColor && typeof attrs.fontColor === 'string') {\n                span.style.color = attrs.fontColor;\n            }\n            if (attrs.bgColor && typeof attrs.bgColor === 'string') {\n                span.style.backgroundColor = attrs.bgColor;\n            }\n            if (attrs.hyperlink && typeof attrs.hyperlink === 'string') {\n                const a = document.createElement('a');\n                a.href = ensureProtocol(attrs.hyperlink);\n                a.appendChild(textNode);\n                textNode = a;\n            }\n            span.appendChild(textNode);\n            textNode = span;\n            fragment.appendChild(textNode);\n            if (index < lines.length - 1) {\n                fragment.appendChild(document.createElement('br'));\n            }\n        });\n        return fragment;\n    }\n}\nexport default EditorView;\n","import EventEmitter from '../utils/events';\nclass ToolbarView extends EventEmitter {\n    constructor(container) {\n        super();\n        this.container = container;\n        this.setupButtons();\n    }\n    setupButtons() {\n        this.container.querySelectorAll('button').forEach(button => {\n            button.addEventListener('mousedown', e => {\n                e.preventDefault();\n            });\n        });\n        this.container.addEventListener('click', e => {\n            const target = e.target;\n            const btn = target.closest('button');\n            if (btn) {\n                const action = btn.getAttribute('data-action');\n                if (action) {\n                    this.emit('toolbarAction', action);\n                }\n            }\n        });\n    }\n    updateActiveStates(attributes) {\n        this.container.querySelectorAll('button').forEach(btn => {\n            const action = btn.getAttribute('data-action');\n            let isActive = false;\n            if (action === 'bold' && attributes.bold)\n                isActive = true;\n            if (action === 'italic' && attributes.italic)\n                isActive = true;\n            if (action === 'underline' && attributes.underline)\n                isActive = true;\n            if (action === 'strikethrough' && attributes.strikethrough)\n                isActive = true;\n            if (action === 'hyperlink' && attributes.hyperlink)\n                isActive = true;\n            if (action === 'undo' && attributes.undo)\n                isActive = true;\n            if (action === 'redo' && attributes.redo)\n                isActive = true;\n            btn.classList.toggle('active', isActive);\n        });\n        this.container.querySelectorAll('select').forEach(select => {\n            const action = select.getAttribute('data-action');\n            if (action === 'fontFamily' && attributes.fontFamily)\n                select.value = attributes.fontFamily;\n            if (action === 'fontSize' && attributes.fontSize)\n                select.value = attributes.fontSize;\n        });\n        if (attributes.fontColor) {\n            const fontColorPicker = document.getElementById('fontColorPicker');\n            if (fontColorPicker) {\n                fontColorPicker.value = attributes.fontColor;\n                fontColorPicker.dispatchEvent(new Event('input', { bubbles: true }));\n            }\n        }\n        if (attributes.bgColor) {\n            const fontColorPicker = document.getElementById('bgColorPicker');\n            if (fontColorPicker) {\n                fontColorPicker.value = attributes.bgColor;\n                fontColorPicker.dispatchEvent(new Event('input', { bubbles: true }));\n            }\n        }\n    }\n}\nexport default ToolbarView;\n","export const strings = {\n    TOOLBAR_CLASSNAME: 'toolbar',\n    TOOLBAR_ID: 'toolbar',\n    EDITOR_CLASSNAME: 'editor',\n    EDITOR_ID: 'editor',\n    EDITOR_ELEMENT_NT_FOUND: 'Editor element not found or incorrect element type.',\n    FONT_FAMILY_SELECT_ID: 'fontFamily',\n    FONT_SIZE_SELECT_ID: 'fontSize',\n    FONT_COLOR_WRAPPER_ID: 'fontColorWrapper',\n    FONT_COLOR_ID: 'fontColor',\n    FONT_COLOR_PICKER_WRAPPER_ID: 'colorWrapper',\n    FONT_COLOR_PICKER_ID: 'fontColorPicker',\n    FONT_COLOR_RESET_ID: 'colorResetFont',\n    BG_COLOR_WRAPPER_ID: 'bgColorWrapper',\n    BG_COLOR_ID: 'bgColor',\n    BG_COLOR_PICKER_WRAPPER_ID: 'colorBgWrapper',\n    BG_COLOR_RESET_ID: 'colorResetBG',\n    BG_COLOR_PICKER_ID: 'bgColorPicker',\n    GET_HTML_BUTTON_ID: 'getHtmlButton',\n    LOAD_HTML_BUTTON_ID: 'loadHtmlButton',\n    HYPERLINK_CONTAINER_ID: 'hyperlink-container',\n    HYPERLINK_INPUT_ID: 'hyperlink-input',\n    HYPERLINK_PLACEHOLDER: 'Enter a URL...',\n    HYPERLINK_APPLY_BTN_ID: 'apply-hyperlink',\n    HYPERLINK_CANCEL_BTN_ID: 'cancel-hyperlink',\n    VIEW_HYPERLINK_CONTAINER_ID: 'hyperlink-container-view',\n    VIEW_HYPERLINK_LABEL_ID: 'hyperlink-view-span',\n    VIEW_HYPERLINK_ANCHOR_ID: 'hyperlink-view-link',\n    TEMPORARY_SELECTION_HIGHLIGHT_CLASS: 'temporary-selection-highlight',\n    PARAGRAPH_BLOCK_CLASS: 'paragraph-block',\n    IMAGE_CROSS_CLASS: 'image-cross',\n    TEST_HTML_CODE: `<div data-id=\"data-id-1734604240404\" class=\"paragraph-block\" type=\"undefined\" style=\"text-align: left;\"><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"> ajsh diujaksdajsh diujaksdajsh </span></span></span></div><div data-id=\"data-id-1739430551701\" class=\"paragraph-block\" type=\"undefined\" style=\"text-align: left;\"><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"> diujaksdasd </span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(163, 67, 67);\"><strong>98hasiudasdh 98</strong></span></span></span></div><div data-id=\"data-id-1739430553412\" class=\"paragraph-block\" type=\"undefined\" style=\"text-align: left;\"><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"><strong> </strong></span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\">This is a </span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(85, 153, 170);\"><span style=\"color: rgb(0, 0, 0);\"><em>t</em></span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(85, 153, 170);\"><span style=\"color: rgb(0, 0, 0);\"> this is a </span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(85, 153, 170);\"><span style=\"color: rgb(0, 0, 0);\"><em>test work</em></span></span></span></div><div data-id=\"data-id-1739430554776\" class=\"paragraph-block\" type=\"undefined\" style=\"text-align: left;\"><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"> </span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\">This is a </span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"><em>test work.</em></span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"> this is a </span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"><strong>test work</strong></span></span></span></div><div data-id=\"data-id-1739430558023\" class=\"paragraph-block\" type=\"undefined\" style=\"text-align: left;\"><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"><strong><em> uj09asujdi</em></strong></span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"><a href=\"a;lsjd 98aiosd\" target=\"_blank\"><strong><em>odiodiooias </em></strong></a></span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"><a href=\"a;lsjd 98aiosd\" target=\"_blank\"><strong>diodiodio</strong></a></span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"><a href=\"a;lsjd 98aiosd\" target=\"_blank\">oias</a></span></span></span></div><div data-id=\"data-id-1739430556280\" class=\"paragraph-block\" type=\"undefined\" style=\"text-align: left;\"><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"> da90 uasd y98asiodoiasda90 uasd y9</span></span></span><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\">8asiodoiasda90 uasd y98asioda</span></span></span></div><div data-id=\"data-id-1739430559464\" class=\"paragraph-block\" type=\"undefined\" style=\"text-align: left;\"><span style=\"font-family: Arial; font-size: 12px;\"><span style=\"background-color: rgb(247, 247, 247);\"><span style=\"color: rgb(0, 0, 0);\"> sdjasdjasdja9sudoija9sudoija9sudoija90sdoa90sdoa90sdo</span></span></span></div>`,\n    POPUP_TOOLBAR_CLASSNAME: 'popup-toolbar',\n    POPUP_TOOLBAR_ID: 'popup-toolbar',\n    TOAST_ID: 'ti-toast',\n    TOAST_SHOW_CLASS: 'ti-toast--show',\n    TOAST_DEFAULT_MESSAGE: 'HTML copied to clipboard',\n    TOAST_DEFAULT_DURATION_MS: 2000,\n};\n","import { saveSelection, restoreSelection, getSelectionRange, } from '../utils/selectionManager';\nimport { strings } from '../constants/strings';\nimport { ensureProtocol } from '../utils/urlDetector';\nclass HyperlinkHandler {\n    constructor(editorContainer, editorView, document) {\n        this.savedSelection = null;\n        this.clickOutsideHandler = null;\n        this.editorContainer = editorContainer;\n        this.editorView = editorView;\n        this.document = document;\n    }\n    setUndoRedoManager(undoRedoManager) {\n        this.undoRedoManager = undoRedoManager;\n    }\n    hanldeHyperlinkClick(start, end, currentOffset, selectedBlockId, blocks) {\n        const existingLink = this.getCommonHyperlinkInRange(start, end, currentOffset, selectedBlockId, blocks);\n        this.showHyperlinkInput(existingLink);\n    }\n    getCommonHyperlinkInRange(start, end, currentOffset, selectedBlockId, blocks) {\n        let offset = currentOffset;\n        let index = 0;\n        if (selectedBlockId) {\n            index = blocks.findIndex((block) => block.dataId === selectedBlockId);\n        }\n        const pieces = blocks[index].pieces;\n        let commonLink = null;\n        for (let piece of pieces) {\n            const pieceEnd = offset + piece.text.length;\n            if (pieceEnd > start && offset < end) {\n                const pieceLink = piece.attributes.hyperlink || null;\n                if (commonLink === null) {\n                    commonLink = pieceLink;\n                }\n                else if (commonLink !== pieceLink) {\n                    return null;\n                }\n            }\n            offset = pieceEnd;\n        }\n        return commonLink;\n    }\n    showHyperlinkInput(existingLink) {\n        var _a, _b, _c;\n        const hyperlinkContainer = document.getElementById(strings.HYPERLINK_CONTAINER_ID);\n        const hyperlinkInput = document.getElementById(strings.HYPERLINK_INPUT_ID);\n        const applyButton = document.getElementById(strings.HYPERLINK_APPLY_BTN_ID);\n        const cancelButton = document.getElementById(strings.HYPERLINK_CANCEL_BTN_ID);\n        if (hyperlinkContainer && hyperlinkInput && applyButton && cancelButton) {\n            hyperlinkContainer.style.display = 'block';\n            const selection = window.getSelection();\n            if (selection && selection.rangeCount > 0) {\n                const range = selection.getRangeAt(0);\n                let rect = null;\n                if (range && typeof range.getBoundingClientRect === 'function') {\n                    rect = range.getBoundingClientRect();\n                }\n                else if (range && typeof range.getClientRects === 'function') {\n                    const list = (_a = range.getClientRects) === null || _a === void 0 ? void 0 : _a.call(range);\n                    rect = list && list.length ? list[0] : null;\n                }\n                if (!rect || (Number.isNaN(rect.top) && Number.isNaN(rect.left))) {\n                    rect = this.editorView.container.getBoundingClientRect();\n                }\n                const scrollY = (window === null || window === void 0 ? void 0 : window.scrollY) || 0;\n                const scrollX = (window === null || window === void 0 ? void 0 : window.scrollX) || 0;\n                hyperlinkContainer.style.top = `${((_b = rect.bottom) !== null && _b !== void 0 ? _b : rect.top) + scrollY + 5}px`;\n                hyperlinkContainer.style.left = `${((_c = rect.left) !== null && _c !== void 0 ? _c : 0) + scrollX}px`;\n            }\n            hyperlinkInput.value = existingLink || '';\n            this.savedSelection = saveSelection(this.editorView.container);\n            this.highlightSelection();\n            hyperlinkInput.focus();\n            applyButton.onclick = null;\n            cancelButton.onclick = null;\n            const dataIdsSnapshot = this.document.dataIds;\n            const applyHyperlinkAction = () => {\n                const url = ensureProtocol(hyperlinkInput.value.trim());\n                if (url) {\n                    this.applyHyperlink(url, dataIdsSnapshot);\n                }\n                hyperlinkContainer.style.display = 'none';\n            };\n            applyButton.onclick = applyHyperlinkAction;\n            hyperlinkInput.onkeydown = (e) => {\n                if (e.key === 'Enter') {\n                    e.preventDefault();\n                    applyHyperlinkAction();\n                }\n            };\n            cancelButton.onclick = () => {\n                this.removeHyperlink(dataIdsSnapshot);\n                hyperlinkContainer.style.display = 'none';\n            };\n        }\n    }\n    highlightSelection() {\n        this.removeHighlightSelection();\n        const selection = window.getSelection();\n        if (selection && selection.rangeCount > 0) {\n            const range = selection.getRangeAt(0);\n            const span = document.createElement('span');\n            span.className = strings.TEMPORARY_SELECTION_HIGHLIGHT_CLASS;\n            span.appendChild(range.extractContents());\n            range.insertNode(span);\n            selection.removeAllRanges();\n            const newRange = document.createRange();\n            newRange.selectNodeContents(span);\n            selection.addRange(newRange);\n        }\n    }\n    removeHighlightSelection() {\n        var _a;\n        const highlights = (_a = this.editorContainer) === null || _a === void 0 ? void 0 : _a.querySelectorAll(`span.${strings.TEMPORARY_SELECTION_HIGHLIGHT_CLASS}`);\n        highlights === null || highlights === void 0 ? void 0 : highlights.forEach(span => {\n            const parent = span.parentNode;\n            if (parent) {\n                while (span.firstChild) {\n                    parent.insertBefore(span.firstChild, span);\n                }\n                parent.removeChild(span);\n            }\n        });\n    }\n    applyHyperlink(url, dataIdsSnapshot) {\n        this.undoRedoManager.saveUndoSnapshot();\n        this.removeHighlightSelection();\n        restoreSelection(this.editorView.container, this.savedSelection);\n        const [start, end] = getSelectionRange(this.editorView);\n        if (start < end) {\n            const normalizedUrl = ensureProtocol(url);\n            if (dataIdsSnapshot.length > 1) {\n                this.document.blocks.forEach((block) => {\n                    if (dataIdsSnapshot.includes(block.dataId)) {\n                        this.document.selectedBlockId = block.dataId;\n                        let countE = 0;\n                        block.pieces.forEach((obj) => {\n                            countE += obj.text.length;\n                        });\n                        let countS = start - countE;\n                        this.document.formatAttribute(countS, countE, 'hyperlink', normalizedUrl);\n                    }\n                });\n            }\n            else {\n                this.document.formatAttribute(start, end, 'hyperlink', normalizedUrl);\n            }\n            this.editorView.render();\n            const selection = window.getSelection();\n            if (selection) {\n                selection.removeAllRanges();\n            }\n            this.editorView.container.focus();\n        }\n        this.savedSelection = null;\n    }\n    removeHyperlink(dataIdsSnapshot) {\n        this.undoRedoManager.saveUndoSnapshot();\n        this.removeHighlightSelection();\n        restoreSelection(this.editorView.container, this.savedSelection);\n        const [start, end] = getSelectionRange(this.editorView);\n        if (start < end) {\n            if (dataIdsSnapshot.length > 1) {\n                this.document.blocks.forEach((block) => {\n                    if (dataIdsSnapshot.includes(block.dataId)) {\n                        this.document.selectedBlockId = block.dataId;\n                        let countE = 0;\n                        block.pieces.forEach((obj) => {\n                            countE += obj.text.length;\n                        });\n                        let countS = start - countE;\n                        this.document.formatAttribute(countS, countE, 'hyperlink', false);\n                    }\n                });\n            }\n            else {\n                this.document.formatAttribute(start, end, 'hyperlink', false);\n            }\n            this.editorView.render();\n            restoreSelection(this.editorView.container, this.savedSelection);\n            this.editorView.container.focus();\n        }\n        this.savedSelection = null;\n    }\n    addClickOutsideListener(container) {\n        this.removeClickOutsideListener();\n        this.clickOutsideHandler = (event) => {\n            if (container && !container.contains(event.target)) {\n                this.hideHyperlinkViewButton();\n            }\n        };\n        setTimeout(() => {\n            document.addEventListener('click', this.clickOutsideHandler);\n        }, 100);\n    }\n    removeClickOutsideListener() {\n        if (this.clickOutsideHandler) {\n            document.removeEventListener('click', this.clickOutsideHandler);\n            this.clickOutsideHandler = null;\n        }\n    }\n    showHyperlinkViewButton(link) {\n        var _a, _b, _c;\n        const viewHyperlinkContainer = document.getElementById(strings.VIEW_HYPERLINK_CONTAINER_ID);\n        const hyperLinkAnchor = document.getElementById(strings.VIEW_HYPERLINK_ANCHOR_ID);\n        if (viewHyperlinkContainer && hyperLinkAnchor) {\n            viewHyperlinkContainer.style.display = 'block';\n            const selection = window.getSelection();\n            if (selection && selection.rangeCount > 0) {\n                const range = selection.getRangeAt(0);\n                let rect = null;\n                if (range && typeof range.getBoundingClientRect === 'function') {\n                    rect = range.getBoundingClientRect();\n                }\n                else if (range && typeof range.getClientRects === 'function') {\n                    const list = (_a = range.getClientRects) === null || _a === void 0 ? void 0 : _a.call(range);\n                    rect = list && list.length ? list[0] : null;\n                }\n                if (!rect) {\n                    rect = this.editorView.container.getBoundingClientRect();\n                }\n                const scrollY = (window === null || window === void 0 ? void 0 : window.scrollY) || 0;\n                const scrollX = (window === null || window === void 0 ? void 0 : window.scrollX) || 0;\n                if (rect) {\n                    viewHyperlinkContainer.style.top = `${((_b = rect.bottom) !== null && _b !== void 0 ? _b : rect.top) + scrollY + 5}px`;\n                    viewHyperlinkContainer.style.left = `${((_c = rect.left) !== null && _c !== void 0 ? _c : 0) + scrollX}px`;\n                }\n            }\n            if (link) {\n                hyperLinkAnchor.innerText = link;\n                hyperLinkAnchor.href = ensureProtocol(link);\n            }\n        }\n        this.addClickOutsideListener(viewHyperlinkContainer);\n    }\n    hideHyperlinkViewButton() {\n        const hyperlinkContainer = document.getElementById(strings.VIEW_HYPERLINK_CONTAINER_ID);\n        if (hyperlinkContainer) {\n            hyperlinkContainer.style.display = 'none';\n        }\n        this.removeClickOutsideListener();\n    }\n}\nexport default HyperlinkHandler;\n","import Piece from '../piece';\nexport function parseHtmlToPieces(html) {\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, 'text/html');\n    return extractPiecesFromNode(doc.body, {\n        bold: false,\n        italic: false,\n        underline: false,\n        hyperlink: false,\n    });\n}\nexport function extractPiecesFromNode(node, inheritedAttrs) {\n    let currentAttrs = Object.assign({}, inheritedAttrs);\n    const pieces = [];\n    if (node instanceof HTMLElement) {\n        if (node.tagName === 'A') {\n            const href = node.getAttribute('href');\n            if (href) {\n                currentAttrs.hyperlink = href;\n            }\n        }\n        if (node.tagName === 'STRONG' || node.tagName === 'B')\n            currentAttrs.bold = true;\n        if (node.tagName === 'EM' || node.tagName === 'I')\n            currentAttrs.italic = true;\n        if (node.tagName === 'U')\n            currentAttrs.underline = true;\n        node.childNodes.forEach(child => {\n            pieces.push(...extractPiecesFromNode(child, currentAttrs));\n        });\n    }\n    else if (node instanceof Text) {\n        const text = node.nodeValue || '';\n        if (text.trim() !== '') {\n            pieces.push(new Piece(text, Object.assign({}, currentAttrs)));\n        }\n    }\n    return pieces;\n}\n","export const icons = {\r\n  bold: `<svg \r\n                xmlns=\"http://www.w3.org/2000/svg\" \r\n                width=\"18\" \r\n                height=\"18\" \r\n                viewBox=\"0 0 24 24\" style=\"fill: rgba(0, 0, 0, 1);transform: ;msFilter:;\">\r\n                <title>Bold</title>\r\n                <path d=\"M17.061 11.22A4.46 4.46 0 0 0 18 8.5C18 6.019 15.981 4 13.5 4H6v15h8c2.481 0 4.5-2.019 4.5-4.5a4.48 4.48 0 0 0-1.439-3.28zM13.5 7c.827 0 1.5.673 1.5 1.5s-.673 1.5-1.5 1.5H9V7h4.5zm.5 9H9v-3h5c.827 0 1.5.673 1.5 1.5S14.827 16 14 16z\"></path>\r\n            </svg>`,\r\n  italic: `<svg \r\n                xmlns=\"http://www.w3.org/2000/svg\" \r\n                width=\"18\" \r\n                height=\"18\" \r\n                viewBox=\"0 0 24 24\" style=\"fill: rgba(0, 0, 0, 1);transform: ;msFilter:;\">\r\n                <title>Italic</title>\r\n                <path d=\"M19 7V4H9v3h2.868L9.012 17H5v3h10v-3h-2.868l2.856-10z\"></path>\r\n            </svg>`,\r\n  underline: `<svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"18\" height=\"18\" \r\n                    viewBox=\"0 0 24 24\" style=\"fill: rgba(0, 0, 0, 1);transform: ;msFilter:;\">\r\n                    <title>Underline</title>\r\n                    <path d=\"M5 18h14v2H5zM6 4v6c0 3.309 2.691 6 6 6s6-2.691 6-6V4h-2v6c0 2.206-1.794 4-4 4s-4-1.794-4-4V4H6z\"></path>\r\n                </svg>`,\r\n  strikethrough: `<svg \r\n        xmlns=\"http://www.w3.org/2000/svg\" \r\n        width=\"18\" \r\n        height=\"18\" \r\n        viewBox=\"0 0 24 24\" \r\n        style=\"fill: rgba(0, 0, 0, 1);\">\r\n        <title>Strikethrough</title>\r\n        <path d=\"M5 12.5h14v-1H5v1zm7-7c-2.21 0-4 1.79-4 4h2a2 2 0 1 1 4 0c0 1.1-.9 2-2 2h-1v2h1a4 4 0 0 0 0-8zm0 14c2.21 0 4-1.79 4-4h-2a2 2 0 1 1-4 0c0-1.1.9-2 2-2h1v-2h-1a4 4 0 0 0 0 8z\"/>\r\n    </svg>`,\r\n  subscript: `<svg \r\n                xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"18\" height=\"18\" \r\n                    viewBox=\"0 0 24 24\">\r\n                    <title>Subscript</title>\r\n                    <path fill=\"currentColor\" d=\"M19 20v-3h3v-1h-3v-1h4v3h-3v1h3v1zM5.875 18l4.625-7.275L6.2 4h2.65l3.1 5h.1l3.075-5H17.8l-4.325 6.725L18.125 18H15.45l-3.4-5.425h-.1L8.55 18z\"/>\r\n                </svg>`,\r\n  superscript: `<svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"18\" \r\n                    height=\"18\" \r\n                    viewBox=\"0 0 24 24\">\r\n                    <title>Superscript</title>\r\n                    <path fill=\"currentColor\" d=\"M19 9V6h3V5h-3V4h4v3h-3v1h3v1zM5.875 20l4.625-7.275L6.2 6h2.65l3.1 5h.1l3.075-5H17.8l-4.325 6.725L18.125 20H15.45l-3.4-5.425h-.1L8.55 20z\"/>\r\n                </svg>`,\r\n  left_align: `<svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"18\" \r\n                    height=\"18\" \r\n                    viewBox=\"0 0 24 24\">\r\n                    <title>Left Align</title>\r\n                    <path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"1.5\" d=\"M4.5 12h8m-8 6.25h15m-15-12.5h15\"/>\r\n                </svg>`,\r\n  center_align: `<svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"18\" \r\n                    height=\"18\" \r\n                    viewBox=\"0 0 24 24\">\r\n                    <title>Center Align</title><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M8 12h8M6 18h12\"/>\r\n                </svg>`,\r\n  right_align: `<svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"18\" \r\n                    height=\"18\" \r\n                    viewBox=\"0 0 24 24\">\r\n                    <title>Right Align</title><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"1.5\" d=\"M19.5 12h-8m8-6.25h-15m15 12.5h-15\"/></svg>`,\r\n  justify: `<svg \r\n                xmlns=\"http://www.w3.org/2000/svg\" \r\n                width=\"18\" \r\n                height=\"18\" \r\n                viewBox=\"0 0 20 20\">\r\n                <title>Justify</title><path fill=\"currentColor\" d=\"M2 4.25a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.25m0 5a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 9.25m.75 4.25a.75.75 0 0 0 0 1.5h14.5a.75.75 0 0 0 0-1.5z\"/>\r\n            </svg>`,\r\n  bullet_list: `<svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"18\" \r\n                    height=\"18\" \r\n                    viewBox=\"0 0 16 16\">\r\n                    <title>Bullet List</title><path fill=\"currentColor\" d=\"M2 4.5a1 1 0 1 0 0-2a1 1 0 0 0 0 2M2 9a1 1 0 1 0 0-2a1 1 0 0 0 0 2m1 3.5a1 1 0 1 1-2 0a1 1 0 0 1 2 0M5.5 3a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zM5 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 5 8m.5 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z\"/></svg>`,\r\n  numbered_list: `<svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"18\" \r\n                    height=\"18\" \r\n                    viewBox=\"0 0 512 512\">\r\n                    <title>Numbererd List</title>\r\n                    <path fill=\"currentColor\" d=\"M184 80h288v32H184zm0 160h288v32H184zm0 160h288v32H184zm-64-240V40H56v32h32v88zM56 262.111V312h80v-32H91.777L136 257.889V192H56v32h48v14.111zM56 440v32h80V344H56v32h48v16H80v32h24v16z\"/>\r\n                </svg>`,\r\n  insert_table: `<svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"18\" \r\n                    height=\"18\" \r\n                    viewBox=\"0 0 20 20\">\r\n                    <title>Insert Table</title>\r\n                    <path fill=\"currentColor\" d=\"M1.364 5.138v12.02h17.272V5.138zM.909 1.5h18.182c.502 0 .909.4.909.895v15.21a.9.9 0 0 1-.91.895H.91c-.503 0-.91-.4-.91-.895V2.395C0 1.9.407 1.5.91 1.5m5.227 1.759c0-.37.306-.671.682-.671s.682.3.682.671v13.899c0 .37-.305.67-.682.67a.676.676 0 0 1-.682-.67zm6.96-.64c.377 0 .682.3.682.67v4.995h4.91c.377 0 .683.301.683.672c0 .37-.306.671-.682.671l-4.911-.001v3.062h5.002c.377 0 .682.3.682.671c0 .37-.305.671-.682.671h-5.002v3.158a.676.676 0 0 1-.682.671a.676.676 0 0 1-.681-.67l-.001-3.159H1.001a.676.676 0 0 1-.682-.67c0-.371.305-.672.682-.672h11.413V9.626L.909 9.627a.676.676 0 0 1-.682-.671c0-.37.306-.671.682-.671l11.505-.001V3.289c0-.37.306-.67.682-.67\"/>\r\n                </svg>`,\r\n  insert_layout: `<svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"18\" \r\n                    height=\"18\" \r\n                    viewBox=\"0 0 256 256\">\r\n                    <title>Insert Layout</title>\r\n                    <path fill=\"currentColor\" d=\"M216 42H40a14 14 0 0 0-14 14v144a14 14 0 0 0 14 14h176a14 14 0 0 0 14-14V56a14 14 0 0 0-14-14M40 54h176a2 2 0 0 1 2 2v42H38V56a2 2 0 0 1 2-2m-2 146v-90h60v92H40a2 2 0 0 1-2-2m178 2H110v-92h108v90a2 2 0 0 1-2 2\"/>\r\n                </svg>`,\r\n  heading: `<svg \r\n                xmlns=\"http://www.w3.org/2000/svg\" \r\n                width=\"18\" \r\n                height=\"18\" \r\n                viewBox=\"0 0 24 24\">\r\n                <title>Heading</title>\r\n                <path fill=\"currentColor\" d=\"M17 11V4h2v17h-2v-8H7v8H5V4h2v7z\"/>\r\n            </svg>`,\r\n  hyperlink: `<svg \r\n                xmlns=\"http://www.w3.org/2000/svg\" \r\n                width=\"18\" \r\n                height=\"18\" \r\n                viewBox=\"0 0 24 24\">\r\n                <title>Hyperlink</title>\r\n                <path fill=\"currentColor\" d=\"M14.78 3.653a3.936 3.936 0 1 1 5.567 5.567l-3.627 3.627a3.936 3.936 0 0 1-5.88-.353a.75.75 0 0 0-1.18.928a5.436 5.436 0 0 0 8.12.486l3.628-3.628a5.436 5.436 0 1 0-7.688-7.688l-3 3a.75.75 0 0 0 1.06 1.061z\"/>\r\n                <path fill=\"currentColor\" d=\"M7.28 11.153a3.936 3.936 0 0 1 5.88.353a.75.75 0 0 0 1.18-.928a5.436 5.436 0 0 0-8.12-.486L2.592 13.72a5.436 5.436 0 1 0 7.688 7.688l3-3a.75.75 0 1 0-1.06-1.06l-3 3a3.936 3.936 0 0 1-5.567-5.568z\"/>\r\n            </svg>`,\r\n  image: `<svg \r\n            xmlns=\"http://www.w3.org/2000/svg\" \r\n            width=\"18\" \r\n            height=\"18\" \r\n            viewBox=\"0 0 16 16\">\r\n            <title>Insert Image</title>\r\n            <path fill=\"currentColor\" d=\"M6 5a2 2 0 1 1-4 0a2 2 0 0 1 4 0m9-4a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zm-3.448 6.134l-3.76 2.769a.5.5 0 0 1-.436.077l-.087-.034l-1.713-.87L1 11.8V14h14V9.751zM15 2H1v8.635l4.28-2.558a.5.5 0 0 1 .389-.054l.094.037l1.684.855l3.813-2.807a.5.5 0 0 1 .52-.045l.079.05L15 8.495z\"/>\r\n        </svg>`,\r\n};\r\n","import { icons } from '../assets/icons';\nimport { strings } from '../constants/strings';\nconst featureGroups = {\n    dropdowns: ['fontFamily', 'fontSize'],\n    colors: ['fontColor', 'bgColor'],\n    formatting: ['bold', 'italic', 'underline', 'strikethrough'],\n    alignment: ['alignLeft', 'alignCenter', 'alignRight'],\n    lists: ['unorderedList', 'orderedList'],\n    media: ['hyperlink', 'image'],\n    utility: ['getHtmlContent', 'loadHtmlContent'],\n};\nfunction createSeparator() {\n    const separator = document.createElement('div');\n    separator.className = 'toolbar-separator';\n    return separator;\n}\nfunction getFeatureGroup(feature) {\n    for (const [group, features] of Object.entries(featureGroups)) {\n        if (features.includes(feature))\n            return group;\n    }\n    return null;\n}\nexport function createEditor(editorId, config) {\n    const mainEditorId = strings.EDITOR_ID;\n    const toolbarId = strings.TOOLBAR_ID;\n    const popupToolbarId = strings.POPUP_TOOLBAR_ID;\n    const allowedFontFamily = [\n        'Arial',\n        'Times New Roman',\n        'Courier New',\n        'Verdana',\n    ];\n    const allowedFontSizes = ['12px', '14px', '16px', '18px', '20px'];\n    const container = document.getElementById(editorId);\n    if (!container)\n        throw new Error(strings.EDITOR_ELEMENT_NT_FOUND);\n    container.classList.add('editor-container');\n    const toolbar = document.createElement('div');\n    toolbar.className = strings.TOOLBAR_CLASSNAME;\n    toolbar.id = toolbarId;\n    container.appendChild(toolbar);\n    if (!(config === null || config === void 0 ? void 0 : config.showToolbar))\n        toolbar.style.display = 'none';\n    const editor = document.createElement('div');\n    editor.id = mainEditorId;\n    editor.className = strings.EDITOR_CLASSNAME;\n    editor.contentEditable = 'true';\n    container.appendChild(editor);\n    const featureLabels = {\n        bold: '<strong>B</strong>',\n        italic: '<em>I</em>',\n        underline: '<u>U</u>',\n        hyperlink: '&#128279;',\n        alignLeft: '&#8676;',\n        alignCenter: '&#8596;',\n        alignRight: '&#8677;',\n        unorderedList: '&#8226;',\n        orderedList: '1.',\n        fontFamily: 'fontFamily',\n        fontSize: 'fontSize',\n        fontColor: 'A',\n        subscript: 'X<sub>2</sub>',\n        superscript: 'X<sup>2</sup>',\n        justify: '&#8644;',\n        insert_table: '&#8866;',\n        insert_layout: '&#10064;',\n        heading: 'H',\n        image: '&#128247;',\n        colors: '&#127912;',\n    };\n    const featureTitles = {\n        bold: 'Bold (Ctrl+B)',\n        italic: 'Italic (Ctrl+I)',\n        underline: 'Underline (Ctrl+U)',\n        strikethrough: 'Strikethrough',\n        hyperlink: 'Insert Link (Ctrl+H)',\n        alignLeft: 'Align Left (Ctrl+L)',\n        alignCenter: 'Align Center (Ctrl+E)',\n        alignRight: 'Align Right (Ctrl+R)',\n        unorderedList: 'Bullet List',\n        orderedList: 'Numbered List',\n        fontColor: 'Text Color',\n        bgColor: 'Highlight Color',\n        image: 'Insert Image',\n        getHtmlContent: 'Get HTML',\n        loadHtmlContent: 'Load HTML',\n    };\n    const featuresWithPngIcon = [\n        { feature: 'alignLeft', id: 'alignLeft', icon: icons.left_align },\n        { feature: 'alignCenter', id: 'alignCenter', icon: icons.center_align },\n        { feature: 'alignRight', id: 'alignRight', icon: icons.right_align },\n        { feature: 'unorderedList', id: 'unorderedList', icon: icons.bullet_list },\n        { feature: 'orderedList', id: 'orderedList', icon: icons.numbered_list },\n        { feature: 'hyperlink', id: 'hyperlink', icon: icons.hyperlink },\n        {\n            feature: 'strikethrough',\n            id: 'strikethrough',\n            icon: icons.strikethrough,\n        },\n    ];\n    const createSelect = (id, options) => {\n        const select = document.createElement('select');\n        select.dataset.action = id;\n        select.id = id;\n        options.forEach(optionValue => {\n            const option = document.createElement('option');\n            option.value = optionValue;\n            option.textContent = optionValue;\n            select.appendChild(option);\n        });\n        return select;\n    };\n    const popupToolbar = document.createElement('div');\n    popupToolbar.id = popupToolbarId;\n    popupToolbar.className = strings.POPUP_TOOLBAR_CLASSNAME;\n    popupToolbar.style.display = 'none';\n    container.appendChild(popupToolbar);\n    if (config.popupFeatures) {\n        config.popupFeatures.forEach((feature, index) => {\n            if (index > 0 && feature === 'hyperlink') {\n                popupToolbar.appendChild(createSeparator());\n            }\n            const featureData = featuresWithPngIcon.find(item => item.feature === feature) || { icon: featureLabels[feature] || feature };\n            const button = document.createElement('button');\n            button.dataset.action = feature;\n            button.innerHTML = featureData.icon;\n            button.dataset.tooltip =\n                featureTitles[feature] ||\n                    feature\n                        .split('_')\n                        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n                        .join(' ');\n            popupToolbar.appendChild(button);\n        });\n    }\n    let lastGroup = null;\n    config.features.forEach((feature, index) => {\n        const currentGroup = getFeatureGroup(feature);\n        if (index > 0 && currentGroup && lastGroup && currentGroup !== lastGroup) {\n            toolbar.appendChild(createSeparator());\n        }\n        lastGroup = currentGroup;\n        if (feature === 'fontFamily') {\n            const fontFamilySelect = createSelect(strings.FONT_FAMILY_SELECT_ID, allowedFontFamily);\n            toolbar.appendChild(fontFamilySelect);\n        }\n        else if (feature === 'fontSize') {\n            const fontSizeSelect = createSelect(strings.FONT_SIZE_SELECT_ID, allowedFontSizes);\n            toolbar.appendChild(fontSizeSelect);\n        }\n        else if (feature === 'fontColor') {\n            if (document.getElementById(strings.FONT_COLOR_WRAPPER_ID))\n                return;\n            const span = document.createElement('span');\n            span.id = strings.FONT_COLOR_WRAPPER_ID;\n            span.style.display = 'inline-flex';\n            span.style.alignItems = 'center';\n            span.style.position = 'relative';\n            span.style.gap = '4px';\n            const button = document.createElement('button');\n            button.id = strings.FONT_COLOR_ID;\n            button.type = 'button';\n            button.dataset.tooltip = featureTitles['fontColor'] || 'Text Color';\n            button.innerHTML =\n                '<span style=\"font-weight: bold; font-size: 14px; position: relative; display: inline-block; padding: 2px 4px;\">A<span style=\"position: absolute; bottom: 0; left: 2px; right: 2px; height: 3px; background-color: #000000; border-radius: 1px;\" id=\"fontColorIndicator\"></span></span>';\n            span.appendChild(button);\n            const span1 = document.createElement('div');\n            span1.id = strings.FONT_COLOR_PICKER_WRAPPER_ID;\n            span1.style.display = 'none';\n            span1.style.position = 'absolute';\n            span1.style.top = '100%';\n            span1.style.left = '0';\n            span1.style.marginTop = '4px';\n            span1.style.zIndex = '1000';\n            span1.style.backgroundColor = '#ffffff';\n            span1.style.border = '1px solid #d1d1d1';\n            span1.style.borderRadius = '4px';\n            span1.style.padding = '8px';\n            span1.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';\n            span1.style.width = '135px';\n            const fontColorPicker = document.createElement('input');\n            fontColorPicker.type = 'color';\n            fontColorPicker.id = strings.FONT_COLOR_PICKER_ID;\n            fontColorPicker.setAttribute('data-action', 'fontColor');\n            fontColorPicker.style.width = '100%';\n            fontColorPicker.style.height = '32px';\n            fontColorPicker.style.border = '1px solid #d1d1d1';\n            fontColorPicker.style.borderRadius = '4px';\n            fontColorPicker.style.cursor = 'pointer';\n            fontColorPicker.style.marginBottom = '8px';\n            fontColorPicker.value = '#000000';\n            span1.appendChild(fontColorPicker);\n            const resetButton = document.createElement('button');\n            resetButton.id = strings.FONT_COLOR_RESET_ID;\n            resetButton.type = 'button';\n            resetButton.textContent = 'Reset';\n            resetButton.style.display = 'block';\n            resetButton.style.width = '100%';\n            resetButton.style.padding = '6px 12px';\n            resetButton.style.fontSize = '12px';\n            resetButton.style.border = '1px solid #000000';\n            resetButton.style.borderRadius = '4px';\n            resetButton.style.backgroundColor = '#f8f8f8';\n            resetButton.style.cursor = 'pointer';\n            resetButton.style.transition = 'background-color 0.2s';\n            resetButton.onmouseenter = () => (resetButton.style.backgroundColor = '#e8e8e8');\n            resetButton.onmouseleave = () => (resetButton.style.backgroundColor = '#f8f8f8');\n            span1.appendChild(resetButton);\n            span.appendChild(span1);\n            toolbar.appendChild(span);\n        }\n        else if (feature === 'bgColor') {\n            if (document.getElementById(strings.BG_COLOR_WRAPPER_ID))\n                return;\n            const span = document.createElement('span');\n            span.id = strings.BG_COLOR_WRAPPER_ID;\n            span.style.display = 'inline-flex';\n            span.style.alignItems = 'center';\n            span.style.position = 'relative';\n            span.style.gap = '4px';\n            const button = document.createElement('button');\n            button.id = strings.BG_COLOR_ID;\n            button.type = 'button';\n            button.dataset.tooltip = featureTitles['bgColor'] || 'Highlight Color';\n            button.innerHTML =\n                '<span style=\"font-weight: bold; font-size: 14px; position: relative; display: inline-block; padding: 2px 4px;\">B<span style=\"position: absolute; bottom: 0; left: 2px; right: 2px; height: 3px; background-color: #ffffff;\" id=\"bgColorIndicator\"></span></span>';\n            span.appendChild(button);\n            const span1 = document.createElement('div');\n            span1.id = strings.BG_COLOR_PICKER_WRAPPER_ID;\n            span1.style.display = 'none';\n            span1.style.position = 'absolute';\n            span1.style.top = '100%';\n            span1.style.left = '0';\n            span1.style.marginTop = '4px';\n            span1.style.zIndex = '1000';\n            span1.style.backgroundColor = '#ffffff';\n            span1.style.border = '1px solid #000000';\n            span1.style.borderRadius = '4px';\n            span1.style.padding = '8px';\n            span1.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';\n            span1.style.width = '135px';\n            const bgColorPicker = document.createElement('input');\n            bgColorPicker.setAttribute('data-action', 'bgColor');\n            bgColorPicker.type = 'color';\n            bgColorPicker.id = strings.BG_COLOR_PICKER_ID;\n            bgColorPicker.style.width = '100%';\n            bgColorPicker.style.height = '32px';\n            bgColorPicker.style.border = '1px solid #000000ff';\n            bgColorPicker.style.borderRadius = '4px';\n            bgColorPicker.style.cursor = 'pointer';\n            bgColorPicker.style.marginBottom = '8px';\n            bgColorPicker.value = '#ffffff';\n            span1.appendChild(bgColorPicker);\n            const resetButton = document.createElement('button');\n            resetButton.id = strings.BG_COLOR_RESET_ID;\n            resetButton.type = 'button';\n            resetButton.textContent = 'Reset';\n            resetButton.style.display = 'block';\n            resetButton.style.width = '100%';\n            resetButton.style.padding = '6px 12px';\n            resetButton.style.fontSize = '12px';\n            resetButton.style.border = '1px solid #d1d1d1';\n            resetButton.style.borderRadius = '4px';\n            resetButton.style.backgroundColor = '#f8f8f8';\n            resetButton.style.cursor = 'pointer';\n            resetButton.style.transition = 'background-color 0.2s';\n            resetButton.onmouseenter = () => (resetButton.style.backgroundColor = '#e8e8e8');\n            resetButton.onmouseleave = () => (resetButton.style.backgroundColor = '#f8f8f8');\n            span1.appendChild(resetButton);\n            span.appendChild(span1);\n            toolbar.appendChild(span);\n        }\n        else if (feature === 'getHtmlContent') {\n            const button = document.createElement('button');\n            button.id = strings.GET_HTML_BUTTON_ID;\n            button.type = 'button';\n            button.textContent = 'Get HTML';\n            button.dataset.tooltip = featureTitles['getHtmlContent'] || 'Get HTML';\n            toolbar.appendChild(button);\n        }\n        else if (feature === 'loadHtmlContent') {\n            const button = document.createElement('button');\n            button.id = strings.LOAD_HTML_BUTTON_ID;\n            button.type = 'button';\n            button.textContent = 'Load HTML';\n            button.dataset.tooltip = featureTitles['loadHtmlContent'] || 'Load HTML';\n            toolbar.appendChild(button);\n        }\n        else if (featuresWithPngIcon.map(item => item.feature).includes(feature)) {\n            const featureData = featuresWithPngIcon.find(item => item.feature === feature);\n            const button = document.createElement('button');\n            button.id = feature;\n            button.dataset.action = feature;\n            button.innerHTML = (featureData === null || featureData === void 0 ? void 0 : featureData.icon) || '';\n            button.dataset.tooltip = featureTitles[feature] || feature;\n            toolbar.appendChild(button);\n        }\n        else {\n            const button = document.createElement('button');\n            button.dataset.action = feature;\n            button.innerHTML = featureLabels[feature] || feature;\n            button.id = feature;\n            button.dataset.tooltip =\n                featureTitles[feature] ||\n                    feature\n                        .split('_')\n                        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n                        .join(' ');\n            toolbar.appendChild(button);\n        }\n    });\n    const hyperlinkContainer = document.createElement('div');\n    hyperlinkContainer.id = strings.HYPERLINK_CONTAINER_ID;\n    hyperlinkContainer.style.display = 'none';\n    const hyperlinkInput = document.createElement('input');\n    hyperlinkInput.type = 'text';\n    hyperlinkInput.id = strings.HYPERLINK_INPUT_ID;\n    hyperlinkInput.placeholder = strings.HYPERLINK_PLACEHOLDER;\n    const applyButton = document.createElement('button');\n    applyButton.id = strings.HYPERLINK_APPLY_BTN_ID;\n    applyButton.textContent = 'Link';\n    const cancelButton = document.createElement('button');\n    cancelButton.id = strings.HYPERLINK_CANCEL_BTN_ID;\n    cancelButton.textContent = 'Unlink';\n    hyperlinkContainer.appendChild(hyperlinkInput);\n    hyperlinkContainer.appendChild(applyButton);\n    hyperlinkContainer.appendChild(cancelButton);\n    toolbar.appendChild(hyperlinkContainer);\n    const viewHyperlinkContainer = document.createElement('div');\n    viewHyperlinkContainer.id = strings.VIEW_HYPERLINK_CONTAINER_ID;\n    viewHyperlinkContainer.style.display = 'none';\n    const hyperLinkViewSpan = document.createElement('span');\n    hyperLinkViewSpan.id = strings.VIEW_HYPERLINK_LABEL_ID;\n    hyperLinkViewSpan.innerHTML = 'Visit URL : ';\n    const hyperLinkAnchor = document.createElement('a');\n    hyperLinkAnchor.id = strings.VIEW_HYPERLINK_ANCHOR_ID;\n    hyperLinkAnchor.href = '';\n    hyperLinkAnchor.target = '_blank';\n    viewHyperlinkContainer.appendChild(hyperLinkViewSpan);\n    viewHyperlinkContainer.appendChild(hyperLinkAnchor);\n    toolbar.appendChild(viewHyperlinkContainer);\n    return { mainEditorId, toolbarId, popupToolbarId };\n}\n","\n          export default function styleInject(css, { insertAt } = {}) {\n            if (!css || typeof document === 'undefined') return\n          \n            const head = document.head || document.getElementsByTagName('head')[0]\n            const style = document.createElement('style')\n            style.type = 'text/css'\n          \n            if (insertAt === 'top') {\n              if (head.firstChild) {\n                head.insertBefore(style, head.firstChild)\n              } else {\n                head.appendChild(style)\n              }\n            } else {\n              head.appendChild(style)\n            }\n          \n            if (style.styleSheet) {\n              style.styleSheet.cssText = css\n            } else {\n              style.appendChild(document.createTextNode(css))\n            }\n          }\n          ","import styleInject from '#style-inject';styleInject(\".editor-container {\\n  border: none;\\n  padding: 0;\\n  border-radius: 12px;\\n}\\n.toolbar {\\n  display: flex;\\n  align-items: center;\\n  flex-wrap: wrap;\\n  gap: 4px;\\n  padding: 8px 12px;\\n  margin-bottom: 0;\\n  background: #fff;\\n  border-radius: 10px;\\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\\n}\\n.toolbar-separator {\\n  width: 1px;\\n  height: 24px;\\n  background: #e5e7eb;\\n  margin: 0 8px;\\n}\\n.toolbar button {\\n  padding: 8px;\\n  border: none;\\n  border-radius: 6px;\\n  background: transparent;\\n  cursor: pointer;\\n  font-size: 15px;\\n  font-weight: 500;\\n  color: #000000;\\n  transition: all 0.15s ease;\\n  display: inline-flex;\\n  align-items: center;\\n  justify-content: center;\\n  position: relative;\\n  min-width: 32px;\\n  height: 32px;\\n}\\n.toolbar button:hover {\\n  background: #f3f4f6;\\n}\\n.toolbar button:hover#fontColor,\\n.toolbar button:hover#bgColor {\\n  background: transparent !important;\\n}\\n.toolbar button[data-tooltip]:hover#fontColor,\\n.toolbar button[data-tooltip]:hover#bgColor {\\n  background: transparent !important;\\n}\\n.toolbar button.active {\\n  background: #e5e7eb;\\n  color: #111827;\\n}\\n.toolbar button svg {\\n  width: 18px;\\n  height: 18px;\\n  display: block;\\n}\\n.toolbar button[data-tooltip],\\n.toolbar select[data-tooltip],\\n.popup-toolbar button[data-tooltip] {\\n  position: relative;\\n}\\n.toolbar button[data-tooltip]::before,\\n.toolbar select[data-tooltip]::before,\\n.popup-toolbar button[data-tooltip]::before {\\n  content: attr(data-tooltip);\\n  position: absolute;\\n  bottom: calc(100% + 8px);\\n  left: 50%;\\n  transform: translateX(-50%) scale(0.9);\\n  padding: 8px 12px;\\n  background: #1f2937;\\n  color: #fff;\\n  font-size: 12px;\\n  font-weight: 500;\\n  border-radius: 8px;\\n  white-space: nowrap;\\n  z-index: 1000;\\n  pointer-events: none;\\n  opacity: 0;\\n  transition: opacity 0.15s ease, transform 0.15s ease;\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\\n}\\n.toolbar button[data-tooltip]::after,\\n.toolbar select[data-tooltip]::after,\\n.popup-toolbar button[data-tooltip]::after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  bottom: calc(100% + 4px);\\n  left: 50%;\\n  transform: translateX(-50%) scale(0.9);\\n  border: 5px solid transparent;\\n  z-index: 1000;\\n  pointer-events: none;\\n  opacity: 0;\\n  transition: opacity 0.15s ease, transform 0.15s ease;\\n}\\n.toolbar button[data-tooltip]:hover::before,\\n.toolbar button[data-tooltip]:hover::after,\\n.toolbar select[data-tooltip]:hover::before,\\n.toolbar select[data-tooltip]:hover::after,\\n.popup-toolbar button[data-tooltip]:hover::before,\\n.popup-toolbar button[data-tooltip]:hover::after {\\n  opacity: 1;\\n  transform: translateX(-50%) scale(1);\\n}\\n#fontFamily,\\n#fontSize {\\n  padding: 6px 12px;\\n  padding-right: 28px;\\n  border: 1px solid #e5e7eb;\\n  border-radius: 8px;\\n  background-color: #fff;\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\\\");\\n  background-repeat: no-repeat;\\n  background-position: right 10px center;\\n  cursor: pointer;\\n  font-size: 14px;\\n  font-weight: 500;\\n  color: #000000;\\n  transition: all 0.15s ease;\\n  appearance: none;\\n  -webkit-appearance: none;\\n}\\n#fontFamily:hover,\\n#fontSize:hover {\\n  border-color: #d1d5db;\\n  background-color: #f9fafb;\\n}\\n#fontFamily:focus,\\n#fontSize:focus {\\n  outline: none;\\n  border-color: #9ca3af;\\n  box-shadow: 0 0 0 3px rgba(156, 163, 175, 0.15);\\n}\\n#fontFamily {\\n  min-width: 130px;\\n}\\n#fontSize {\\n  min-width: 75px;\\n}\\n#editor {\\n  border: 1px solid #e5e7eb;\\n  border-radius: 10px;\\n  padding: 20px 24px;\\n  min-height: 200px;\\n  outline: none;\\n  white-space: pre-wrap;\\n  overflow-wrap: break-word;\\n  background: #fff;\\n  margin-top: 12px;\\n  font-size: 15px;\\n  line-height: 1.6;\\n  color: #1f2937;\\n}\\n#editor:focus {\\n  border-color: #d1d5db;\\n  box-shadow: 0 0 0 3px rgba(156, 163, 175, 0.1);\\n}\\n.paragraph-block {\\n  padding: 2px 0;\\n  margin: 0;\\n}\\n#fontColor,\\n#bgColor {\\n  font-size: 15px;\\n  font-weight: 600;\\n  position: relative;\\n  padding-bottom: 10px;\\n}\\n#fontColor::after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  bottom: 4px;\\n  left: 50%;\\n  transform: translateX(-50%);\\n  width: 14px;\\n  height: 3px;\\n  border-radius: 2px;\\n}\\n#bgColor::after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  bottom: 4px;\\n  left: 50%;\\n  transform: translateX(-50%);\\n  width: 14px;\\n  height: 3px;\\n  border-radius: 2px;\\n}\\n#fontColorPicker,\\n#bgColorPicker {\\n  border: 0;\\n  padding: 0;\\n  margin: 0;\\n  height: 20px;\\n  width: 20px;\\n  cursor: pointer;\\n  border-radius: 4px;\\n}\\n#fontColorWrapper {\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n}\\n#hyperlink-container,\\n#hyperlink-container-view {\\n  position: absolute;\\n  display: none;\\n  z-index: 1000;\\n  padding: 12px;\\n  border: 1px solid #e5e7eb;\\n  border-radius: 10px;\\n  background: white;\\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1), 0 4px 10px rgba(0, 0, 0, 0.05);\\n}\\n#hyperlink-input {\\n  width: 220px;\\n  margin-right: 8px;\\n  padding: 8px 12px;\\n  border: 1px solid #e5e7eb;\\n  border-radius: 6px;\\n  font-size: 14px;\\n  transition: all 0.15s ease;\\n}\\n#hyperlink-input:focus {\\n  outline: none;\\n  border-color: #9ca3af;\\n  box-shadow: 0 0 0 3px rgba(156, 163, 175, 0.15);\\n}\\n#apply-hyperlink,\\n#cancel-hyperlink {\\n  padding: 8px 14px;\\n  border: none;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  font-size: 14px;\\n  font-weight: 500;\\n  transition: all 0.15s ease;\\n}\\n#apply-hyperlink {\\n  background: #1f2937;\\n  color: white;\\n}\\n#apply-hyperlink:hover {\\n  background: #000000;\\n}\\n#cancel-hyperlink {\\n  background: #f3f4f6;\\n  color: #000000;\\n}\\n#cancel-hyperlink:hover {\\n  background: #e5e7eb;\\n}\\n.temporary-selection-highlight {\\n  background-color: rgba(59, 130, 246, 0.3);\\n}\\n.popup-toolbar {\\n  position: absolute;\\n  z-index: 1001;\\n  background: #fff;\\n  border-radius: 10px;\\n  padding: 6px 8px;\\n  display: none;\\n  align-items: center;\\n  gap: 2px;\\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15), 0 4px 10px rgba(0, 0, 0, 0.05);\\n  border: 1px solid #e5e7eb;\\n}\\n.popup-toolbar button {\\n  background: transparent;\\n  border: none;\\n  color: #000000;\\n  cursor: pointer;\\n  padding: 6px 8px;\\n  border-radius: 6px;\\n  display: inline-flex;\\n  align-items: center;\\n  justify-content: center;\\n  transition: all 0.15s ease;\\n}\\n.popup-toolbar button:hover {\\n  background: #f3f4f6;\\n}\\n.popup-toolbar button.active {\\n  background: #e5e7eb;\\n}\\n.popup-toolbar button svg {\\n  width: 16px;\\n  height: 16px;\\n  display: block;\\n}\\n.popup-toolbar .toolbar-separator {\\n  width: 1px;\\n  height: 20px;\\n  background: #e5e7eb;\\n  margin: 0 4px;\\n}\\n.ti-toast {\\n  position: fixed;\\n  left: 50%;\\n  bottom: 24px;\\n  transform: translateX(-50%);\\n  background: #1f2937;\\n  color: #fff;\\n  padding: 12px 18px;\\n  border-radius: 10px;\\n  font-size: 14px;\\n  font-weight: 500;\\n  z-index: 2000;\\n  opacity: 0;\\n  pointer-events: none;\\n  transition: opacity 0.2s ease, transform 0.2s ease;\\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);\\n}\\n.ti-toast.ti-toast--show {\\n  opacity: 1;\\n}\\n.text-igniter a {\\n  color: #2563eb;\\n  text-decoration: underline;\\n  text-decoration-color: rgba(37, 99, 235, 0.3);\\n  text-underline-offset: 2px;\\n  cursor: pointer;\\n  transition: all 0.15s ease;\\n}\\n.text-igniter a:hover {\\n  color: #1d4ed8;\\n  text-decoration-color: rgba(37, 99, 235, 0.6);\\n}\\n.text-igniter a:visited {\\n  color: #7c3aed;\\n}\\n.link-popup {\\n  position: absolute;\\n  background: #1f2937;\\n  border-radius: 8px;\\n  padding: 4px;\\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);\\n  z-index: 1000;\\n  display: none;\\n  animation: fadeIn 0.15s ease;\\n  flex-direction: row;\\n  gap: 2px;\\n}\\n.link-popup button {\\n  background: transparent;\\n  color: white;\\n  border: none;\\n  padding: 6px;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  font-size: 14px;\\n  transition: background 0.15s ease;\\n  width: 28px;\\n  height: 28px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n.link-popup button:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n@keyframes fadeIn {\\n  from {\\n    opacity: 0;\\n    transform: translateY(-4px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n}\\n#editor img {\\n  max-width: 100%;\\n  border-radius: 8px;\\n  margin: 8px 0;\\n}\\n#editor .image-float-right {\\n  float: right;\\n  margin: 0 0 12px 16px;\\n  max-width: 200px;\\n  border-radius: 8px;\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n}\\n#editor .image-float-left {\\n  float: left;\\n  margin: 0 16px 12px 0;\\n  max-width: 200px;\\n  border-radius: 8px;\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n}\\n\")","import Piece from './piece';\nclass HtmlToJsonParser {\n    constructor(htmlString) {\n        this.htmlString = htmlString;\n        this.doc = new DOMParser().parseFromString(htmlString, 'text/html');\n    }\n    parse() {\n        const elements = this.doc.body.children;\n        let jsonData = [];\n        Array.from(elements).forEach((element, i) => {\n            const _element = this.parseElement(element);\n            console.log(element, 'element parse', i, _element);\n            jsonData.push(_element);\n        });\n        console.log(jsonData, 'element--jsondata');\n        return jsonData;\n    }\n    parseElement(element) {\n        const dataId = element.getAttribute('data-id') || '';\n        const className = element.className || 'paragraph-block';\n        const alignment = element.style.textAlign || 'left';\n        let listType = null;\n        let listStart = null;\n        let parentId = null;\n        if (element.tagName === 'UL') {\n            listType = 'ul';\n        }\n        else if (element.tagName === 'OL') {\n            listType = 'ol';\n            listStart = parseInt(element.getAttribute('start') || '1', 10);\n        }\n        let pieces = [];\n        if (listType) {\n            this.parseListItems(element, pieces);\n        }\n        else {\n            this.parseParagraphText(element, pieces);\n        }\n        return Object.assign(Object.assign(Object.assign({ dataId, class: className, alignment,\n            pieces }, (listType ? { listType } : {})), (listStart !== null ? { listStart } : {})), (parentId !== null ? { parentId } : {}));\n    }\n    parseListItems(element, pieces) {\n        const listItems = element.querySelectorAll('li');\n        listItems.forEach(li => {\n            const piece = this.extractTextAttributes(li);\n            if (piece)\n                pieces.push(new Piece(piece.text, piece.attributes));\n        });\n    }\n    parseParagraphText(element, pieces) {\n        const spans = element.querySelectorAll('span');\n        const uniquePieces = new Map();\n        spans.forEach(span => {\n            const piece = this.extractTextAttributes(span);\n            console.log(piece, 'piece parseParagraphText span', span.textContent, span.style.color);\n            if (piece) {\n                const existingPiece = uniquePieces.get(piece.text);\n                if (existingPiece) {\n                    existingPiece.attributes.bold =\n                        existingPiece.attributes.bold || piece.attributes.bold;\n                    existingPiece.attributes.italic =\n                        existingPiece.attributes.italic || piece.attributes.italic;\n                    existingPiece.attributes.underline =\n                        existingPiece.attributes.underline || piece.attributes.underline;\n                    existingPiece.attributes.fontFamily =\n                        piece.attributes.fontFamily || existingPiece.attributes.fontFamily;\n                    existingPiece.attributes.fontSize =\n                        piece.attributes.fontSize || existingPiece.attributes.fontSize;\n                    existingPiece.attributes.fontColor =\n                        piece.attributes.fontColor || existingPiece.attributes.fontColor;\n                    existingPiece.attributes.bgColor =\n                        piece.attributes.bgColor || existingPiece.attributes.bgColor;\n                }\n                else {\n                    uniquePieces.set(piece.text, Object.assign({}, piece));\n                }\n            }\n        });\n        uniquePieces.forEach(uniquePiece => {\n            pieces.push(new Piece(uniquePiece.text, uniquePiece.attributes));\n        });\n        console.log(pieces, 'pieces--parseParagraphText (merged)');\n    }\n    extractTextAttributes(node) {\n        var _a;\n        const text = node.textContent || '';\n        if (!text)\n            return null;\n        console.log('extractTextAttributes node', node, node.style.color);\n        return {\n            text,\n            attributes: {\n                bold: node.querySelector('b, strong') !== null,\n                italic: node.querySelector('i, em') !== null,\n                underline: node.querySelector('u') !== null,\n                undo: false,\n                redo: false,\n                fontFamily: node.style.fontFamily || 'Arial',\n                fontSize: node.style.fontSize || '12px',\n                hyperlink: node.querySelector('a')\n                    ? (_a = node.querySelector('a')) === null || _a === void 0 ? void 0 : _a.getAttribute('href')\n                    : false,\n                fontColor: node.style.color,\n                bgColor: node.style.backgroundColor,\n            },\n        };\n    }\n    rgbToHex(rgb, isBackground = false) {\n        const rgbArray = rgb.match(/\\d+/g);\n        if (!rgbArray || rgbArray.length < 3)\n            return null;\n        const hex = rgbArray\n            .map(x => {\n            const value = parseInt(x);\n            if (value < 0 || value > 255)\n                return '00';\n            return value.toString(16).padStart(2, '0');\n        })\n            .join('');\n        if (!isBackground && hex === '000000') {\n            return null;\n        }\n        return `#${hex}`;\n    }\n}\nexport default HtmlToJsonParser;\n","import { getSelectionRange } from '../utils/selectionManager';\nimport Piece from '../piece';\nimport { extractTextFromDataId, addBlockAfter, } from '../utils/selectionManager';\nimport { strings } from '../constants/strings';\nexport class ImageHandler {\n    constructor(editor, document) {\n        this.editor = editor;\n        this.document = document;\n        this.isImageHighlighted = false;\n        this.highLightedImageDataId = '';\n        this.currentCursorLocation = 0;\n        this.isCrossIconVisible = false;\n    }\n    setEditorView(editorView) {\n        this.editorView = editorView;\n    }\n    insertImage() {\n        const fileInput = document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.accept = 'image/*';\n        fileInput.click();\n        fileInput.onchange = () => {\n            const file = fileInput.files ? fileInput.files[0] : null;\n            if (file) {\n                const reader = new FileReader();\n                reader.onload = e => {\n                    var _a;\n                    const dataUrl = (_a = e.target) === null || _a === void 0 ? void 0 : _a.result;\n                    this.insertImageAtCursor(dataUrl);\n                };\n                reader.readAsDataURL(file);\n            }\n        };\n    }\n    insertImageAtCursor(dataUrl) {\n        if (!dataUrl)\n            return;\n        const [start, end] = getSelectionRange(this.editorView);\n        if (end > start) {\n            this.document.deleteRange(start, end, this.document.selectedBlockId);\n        }\n        this.insertImageAtPosition(dataUrl, start, this.document.selectedBlockId);\n    }\n    setCursorPostion(postion, dataId) {\n        if (typeof postion !== 'number' || !dataId)\n            return;\n        const div = document.querySelector(`[data-id=\"${dataId}\"]`);\n        if (!div)\n            return;\n        if (typeof div.focus === 'function')\n            div.focus();\n        setTimeout(() => {\n            const range = document.createRange();\n            const sel = window.getSelection();\n            if (div.firstChild) {\n                range.setStart(div.firstChild, postion);\n            }\n            else {\n                const textNode = document.createTextNode('');\n                div.appendChild(textNode);\n                range.setStart(textNode, 0);\n            }\n            range.collapse(true);\n            sel === null || sel === void 0 ? void 0 : sel.removeAllRanges();\n            sel === null || sel === void 0 ? void 0 : sel.addRange(range);\n        }, 0);\n    }\n    insertImageAtPosition(dataUrl, position, dataId) {\n        if (!dataUrl || typeof position !== 'number' || !this.editorView)\n            return;\n        console.log(dataUrl, position, dataId, 'vicky insertImageAtPosition', this.document.blocks);\n        const uniqueId1 = `data-id-${Date.now()}-${Math.random() * 1000}`;\n        const uniqueId2 = `data-id-${Date.now()}-${Math.random() * 1000}`;\n        const uniqueId3 = `data-id-${Date.now()}-${Math.random() * 1000}`;\n        const newImageBlock = {\n            dataId: uniqueId1,\n            class: strings.PARAGRAPH_BLOCK_CLASS,\n            pieces: [new Piece(' ')],\n            type: 'image',\n            image: dataUrl,\n        };\n        const newTextBlock = {\n            dataId: uniqueId2,\n            class: strings.PARAGRAPH_BLOCK_CLASS,\n            pieces: [new Piece(' ')],\n            type: 'text',\n        };\n        let selectedBlockId = this.document.selectedBlockId;\n        const indexOfCurrentBlock = this.document.blocks.findIndex((block) => block.dataId === this.document.selectedBlockId);\n        let newBlocks = [];\n        const { remainingText, piece } = extractTextFromDataId(selectedBlockId || '', this.document);\n        console.log(selectedBlockId || '', this.document, 'extractTextFromDataId-vicky', remainingText, piece);\n        const extractedContent = ' ' + remainingText;\n        let updatedBlock = this.document.blocks;\n        if (extractedContent.length > 0) {\n            const _extractedContent = remainingText.split(' ');\n            let _pieces = [];\n            if (_extractedContent[0] !== '' || _extractedContent[1] !== undefined) {\n                if (piece.length === 1) {\n                    _pieces = [new Piece(extractedContent, piece[0].attributes)];\n                }\n                else {\n                    _pieces.push(new Piece(' ' + _extractedContent[0] + ' ', piece[0].attributes));\n                    if (piece.length >= 2) {\n                        piece.forEach((obj, i) => {\n                            if (i !== 0) {\n                                _pieces.push(obj);\n                            }\n                        });\n                    }\n                }\n            }\n            else {\n                _pieces = [new Piece(' ')];\n            }\n            console.log(this.document.selectedBlockId, 'uniqueId3 extractTextFromDataId-vicky', uniqueId3);\n            updatedBlock = addBlockAfter(this.document.blocks, this.document.selectedBlockId || '', {\n                dataId: uniqueId3,\n                class: strings.PARAGRAPH_BLOCK_CLASS,\n                pieces: _pieces,\n                type: 'text',\n            });\n        }\n        this.document.blocks = updatedBlock;\n        this.document.deleteRange(this.currentCursorLocation, this.currentCursorLocation + remainingText.length, this.document.selectedBlockId, this.document.currentOffset);\n        if (this.document.blocks.length > indexOfCurrentBlock + 1) {\n            this.document.blocks.forEach((block, idx) => {\n                newBlocks.push(block);\n                if (idx === indexOfCurrentBlock)\n                    newBlocks.push(newImageBlock);\n                else if (selectedBlockId === this.document.selectedBlockId)\n                    selectedBlockId = block.dataId;\n            });\n        }\n        else {\n            newBlocks = [...this.document.blocks, newImageBlock, newTextBlock];\n            selectedBlockId = newTextBlock.dataId;\n        }\n        this.document.blocks = newBlocks;\n        this.editorView.render();\n        this.document.selectedBlockId = selectedBlockId;\n        const div = document.querySelector(`[data-id=\"${selectedBlockId}\"]`);\n        div.focus();\n        setTimeout(() => {\n            const range = document.createRange();\n            const sel = window.getSelection();\n            if (div.firstChild) {\n                range.setStart(div.firstChild, 1);\n            }\n            else {\n                const textNode = document.createTextNode('');\n                div.appendChild(textNode);\n                range.setStart(textNode, 0);\n            }\n            range.collapse(true);\n            sel === null || sel === void 0 ? void 0 : sel.removeAllRanges();\n            sel === null || sel === void 0 ? void 0 : sel.addRange(range);\n        }, 0);\n    }\n    createImageFragment(imageUrl, dataId) {\n        if (!imageUrl || !dataId)\n            return document.createDocumentFragment();\n        const fragment = document.createDocumentFragment();\n        const img = document.createElement('img');\n        img.src = imageUrl;\n        img.style.maxWidth = '30%';\n        img.setAttribute('contenteditable', 'false');\n        fragment.appendChild(img);\n        const span = document.createElement('span');\n        span.setAttribute('contenteditable', 'false');\n        span.appendChild(fragment);\n        img.addEventListener('click', () => this.addStyleToImage(dataId));\n        return span;\n    }\n    addStyleToImage(dataId) {\n        if (!dataId)\n            return;\n        if (!this.isCrossIconVisible) {\n            const div = document.querySelector(`[data-id=\"${dataId}\"]`);\n            const span = div === null || div === void 0 ? void 0 : div.querySelector('span');\n            if (span)\n                span.style.position = 'relative';\n            const img = div === null || div === void 0 ? void 0 : div.querySelector('img');\n            if (img) {\n                img.style.border = '2px solid blue';\n            }\n            const cross = document.createElement('div');\n            cross.className = strings.IMAGE_CROSS_CLASS;\n            cross.innerHTML = 'x';\n            Object.assign(cross.style, {\n                position: 'absolute',\n                top: '0',\n                left: '50%',\n                transform: 'translate(-50%, 0)',\n                background: '#fff',\n                borderRadius: '50%',\n                width: '30px',\n                height: '30px',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                cursor: 'pointer',\n                border: '3px solid blue',\n                zIndex: '999',\n            });\n            cross.addEventListener('mouseover', () => (cross.style.border = '3px solid black'));\n            cross.addEventListener('mouseout', () => (cross.style.border = '3px solid blue'));\n            cross.addEventListener('click', e => {\n                e.stopPropagation();\n                this.deleteImage();\n            });\n            span === null || span === void 0 ? void 0 : span.appendChild(cross);\n            this.isImageHighlighted = true;\n            this.highLightedImageDataId = dataId;\n            this.isCrossIconVisible = true;\n        }\n    }\n    clearImageStyling() {\n        if (!this.highLightedImageDataId)\n            return;\n        const div = document.querySelector(`[data-id=\"${this.highLightedImageDataId}\"]`);\n        if (div) {\n            const span = div.querySelector('span');\n            span === null || span === void 0 ? void 0 : span.removeAttribute('style');\n            const img = span === null || span === void 0 ? void 0 : span.querySelector('img');\n            if (img) {\n                img.removeAttribute('style');\n            }\n            const cross = span === null || span === void 0 ? void 0 : span.querySelector(`.${strings.IMAGE_CROSS_CLASS}`);\n            cross === null || cross === void 0 ? void 0 : cross.remove();\n            this.highLightedImageDataId = '';\n        }\n        this.isCrossIconVisible = false;\n    }\n    deleteImage() {\n        if (!this.highLightedImageDataId)\n            return;\n        this.document.blocks = this.document.blocks.filter((block) => block.dataId !== this.highLightedImageDataId);\n        this.highLightedImageDataId = '';\n        this.isImageHighlighted = false;\n        this.clearImageStyling();\n        this.document.emit('documentChanged', this);\n    }\n}\n","import { getSelectionRange, saveSelection } from '../utils/selectionManager';\nimport Piece from '../piece';\nexport default class UndoRedoManager {\n    constructor(document, editorView) {\n        this.snapshotUndoStack = [];\n        this.snapshotRedoStack = [];\n        this.maxSnapshots = 5000;\n        this.document = document;\n        this.editorView = editorView;\n    }\n    createSnapshot() {\n        const [start, end] = getSelectionRange(this.editorView);\n        return {\n            blocks: JSON.parse(JSON.stringify(this.document.blocks)),\n            dataIds: [...this.document.dataIds],\n            selectedBlockId: this.document.selectedBlockId,\n            currentOffset: this.document.currentOffset,\n            selection: this.getCurrentSelection(),\n            cursorPosition: start,\n        };\n    }\n    getCurrentSelection() {\n        const sel = saveSelection(this.document.editorView.container);\n        return sel ? { start: sel.start, end: sel.end } : { start: 0, end: 0 };\n    }\n    saveUndoSnapshot() {\n        const snapshot = this.createSnapshot();\n        console.log('Saving snapshot:', snapshot.cursorPosition, 'Stack length:', this.snapshotUndoStack.length);\n        this.snapshotUndoStack.push(snapshot);\n        if (this.snapshotUndoStack.length > this.maxSnapshots) {\n            this.snapshotUndoStack.shift();\n        }\n        this.snapshotRedoStack = [];\n    }\n    restoreSnapshot(snapshot) {\n        this.document.blocks = snapshot.blocks;\n        this.document.dataIds = snapshot.dataIds;\n        this.document._selectedBlockId = snapshot.selectedBlockId;\n        this.document.currentOffset = snapshot.currentOffset;\n        for (let block of this.document.blocks) {\n            if (block.pieces && Array.isArray(block.pieces)) {\n                block.pieces = block.pieces.map((piece) => new Piece(piece.text, piece.attributes));\n            }\n        }\n        this.document.emit('documentChanged', this.document);\n        setTimeout(() => {\n            this.document.setCursorPosition(snapshot.cursorPosition || 0);\n        }, 0);\n    }\n    undo() {\n        console.log('UNDO - Undo stack length:', this.snapshotUndoStack.length);\n        console.log('UNDO - Redo stack length:', this.snapshotRedoStack.length);\n        if (this.snapshotUndoStack.length === 0)\n            return;\n        const currentSnapshot = this.createSnapshot();\n        this.snapshotRedoStack.push(currentSnapshot);\n        if (this.snapshotRedoStack.length > this.maxSnapshots) {\n            this.snapshotRedoStack.shift();\n        }\n        const snapshot = this.snapshotUndoStack.pop();\n        if (snapshot) {\n            console.log('UNDO - Restoring cursor position:', snapshot.cursorPosition);\n            this.restoreSnapshot(snapshot);\n        }\n    }\n    redo() {\n        if (this.snapshotRedoStack.length === 0)\n            return;\n        const currentSnapshot = this.createSnapshot();\n        this.snapshotUndoStack.push(currentSnapshot);\n        if (this.snapshotUndoStack.length > this.maxSnapshots) {\n            this.snapshotUndoStack.shift();\n        }\n        const snapshot = this.snapshotRedoStack.pop();\n        if (snapshot) {\n            this.restoreSnapshot(snapshot);\n        }\n    }\n}\n","import EventEmitter from '../utils/events';\nclass PopupToolbarView extends EventEmitter {\n    constructor(container) {\n        super();\n        this.container = container;\n        this.setupButtons();\n    }\n    setupButtons() {\n        this.container.addEventListener('mousedown', e => {\n            e.preventDefault();\n        });\n        this.container.addEventListener('click', e => {\n            const target = e.target;\n            const btn = target.closest('button');\n            if (btn) {\n                const action = btn.getAttribute('data-action');\n                if (action) {\n                    this.emit('popupAction', action);\n                }\n            }\n        });\n    }\n    show(selection) {\n        const range = selection.getRangeAt(0);\n        const rect = range.getBoundingClientRect();\n        if (rect.width === 0 && rect.height === 0) {\n            this.hide();\n            return;\n        }\n        this.container.style.display = 'flex';\n        const popupWidth = this.container.offsetWidth;\n        const popupHeight = this.container.offsetHeight;\n        let top = rect.top + window.scrollY - popupHeight - 8;\n        let left = rect.left + window.scrollX + rect.width / 2 - popupWidth / 2;\n        if (top < window.scrollY) {\n            top = rect.bottom + window.scrollY + 8;\n        }\n        if (left < 0) {\n            left = 5;\n        }\n        this.container.style.top = `${top}px`;\n        this.container.style.left = `${left}px`;\n    }\n    hide() {\n        this.container.style.display = 'none';\n    }\n    updateActiveStates(attributes) {\n        this.container.querySelectorAll('button').forEach(btn => {\n            const action = btn.getAttribute('data-action');\n            let isActive = false;\n            if (action === 'bold' && attributes.bold)\n                isActive = true;\n            if (action === 'italic' && attributes.italic)\n                isActive = true;\n            if (action === 'underline' && attributes.underline)\n                isActive = true;\n            if (action === 'strikethrough' && attributes.strikethrough)\n                isActive = true;\n            if (action === 'hyperlink' && attributes.hyperlink)\n                isActive = true;\n            btn.classList.toggle('active', isActive);\n        });\n    }\n}\nexport default PopupToolbarView;\n","class LinkPopupView {\n    constructor() {\n        this.linkElement = null;\n        this.createPopup();\n    }\n    setCallbacks(onOpenClick, onUnlinkClick) {\n        this.onOpenClick = onOpenClick;\n        this.onUnlinkClick = onUnlinkClick;\n    }\n    createPopup() {\n        this.popup = document.createElement('div');\n        this.popup.className = 'link-popup';\n        this.popup.style.cssText = `\r\n      position: absolute;\r\n      background: #000;\r\n      border-radius: 4px;\r\n      padding: 2px;\r\n      box-shadow: 0 1px 4px rgba(0,0,0,0.5);\r\n      z-index: 1000;\r\n      display: none;\r\n    `;\n        const openBtn = this.createButton('Open', '');\n        const unlinkBtn = this.createButton('Unlink', '');\n        openBtn.addEventListener('click', () => this.handleOpenClick());\n        unlinkBtn.addEventListener('click', () => this.handleUnlinkClick());\n        this.popup.appendChild(openBtn);\n        this.popup.appendChild(unlinkBtn);\n        document.body.appendChild(this.popup);\n    }\n    createButton(text, icon) {\n        const button = document.createElement('button');\n        button.innerHTML = `${icon}`;\n        button.title = text;\n        button.style.cssText = `\r\n      background: transparent;\r\n      color: white;\r\n      border: none;\r\n      padding: 4px;\r\n      margin: 0 1px;\r\n      border-radius: 2px;\r\n      cursor: pointer;\r\n      font-size: 16px;\r\n      transition: background 0.1s;\r\n      width: 24px;\r\n      height: 24px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n    `;\n        button.addEventListener('mouseenter', () => {\n            button.style.background = '#333';\n        });\n        button.addEventListener('mouseleave', () => {\n            button.style.background = 'transparent';\n        });\n        return button;\n    }\n    handleOpenClick() {\n        if (this.linkElement && this.onOpenClick) {\n            this.onOpenClick(this.linkElement.href);\n        }\n    }\n    handleUnlinkClick() {\n        if (this.onUnlinkClick && this.linkElement) {\n            this.onUnlinkClick(this.linkElement);\n        }\n    }\n    show(linkElement, x, y) {\n        this.linkElement = linkElement;\n        const rect = linkElement.getBoundingClientRect();\n        this.popup.style.left = `${rect.left + window.scrollX}px`;\n        this.popup.style.top = `${rect.bottom + window.scrollY + 5}px`;\n        this.popup.style.display = 'flex';\n        this.popup.style.opacity = '0';\n        this.popup.style.transform = 'translateY(-2px)';\n        requestAnimationFrame(() => {\n            this.popup.style.transition =\n                'opacity 0.1s ease-in-out, transform 0.1s ease-in-out';\n            this.popup.style.opacity = '1';\n            this.popup.style.transform = 'translateY(0)';\n        });\n    }\n    hide() {\n        if (this.popup.style.display !== 'none') {\n            this.popup.style.transition =\n                'opacity 0.1s ease-in-out, transform 0.1s ease-in-out';\n            this.popup.style.opacity = '0';\n            this.popup.style.transform = 'translateY(-2px)';\n            setTimeout(() => {\n                this.popup.style.display = 'none';\n                this.popup.style.transition = '';\n            }, 100);\n        }\n    }\n    isPopup(element) {\n        return this.popup.contains(element);\n    }\n    isVisible() {\n        return this.popup.style.display !== 'none';\n    }\n}\nexport default LinkPopupView;\n","import TextDocument from './textDocument';\nimport EditorView from './view/editorView';\nimport ToolbarView from './view/toolbarView';\nimport HyperlinkHandler from './handlers/hyperlink';\nimport Piece from './piece';\nimport { saveSelection } from './utils/selectionManager';\nimport { parseHtmlToPieces } from './utils/parseHtml';\nimport { createEditor } from './config/editorConfig';\nimport './styles/text-igniter.css';\nimport HtmlToJsonParser from './HtmlToJsonParser';\nimport { ImageHandler } from './handlers/image';\nimport { strings } from './constants/strings';\nimport UndoRedoManager from './handlers/undoRedoManager';\nimport PopupToolbarView from './view/popupToolbarView';\nimport LinkPopupView from './view/linkPopupView';\nimport { detectUrlsInText } from './utils/urlDetector';\nimport EventEmitter from './utils/events';\nclass TextIgniter extends EventEmitter {\n    constructor(editorId, config) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n        super();\n        this.savedSelection = null;\n        this.debounceTimer = null;\n        const { mainEditorId, toolbarId, popupToolbarId } = createEditor(editorId, config);\n        this.editorContainer = document.getElementById(mainEditorId) || null;\n        this.toolbarContainer = document.getElementById(toolbarId) || null;\n        const popupToolbarContainer = document.getElementById(popupToolbarId) || null;\n        if (!this.editorContainer ||\n            !this.toolbarContainer ||\n            !popupToolbarContainer) {\n            throw new Error('Editor element not found or incorrect element type.');\n        }\n        this.document = new TextDocument();\n        this.editorView = new EditorView(this.editorContainer, this.document);\n        this.toolbarView = new ToolbarView(this.toolbarContainer);\n        this.popupToolbarView = new PopupToolbarView(popupToolbarContainer);\n        this.linkPopupView = new LinkPopupView();\n        this.hyperlinkHandler = new HyperlinkHandler(this.editorContainer, this.editorView, this.document);\n        this.imageHandler = new ImageHandler(this.editorContainer, this.document);\n        this.undoRedoManager = new UndoRedoManager(this.document, this.editorView);\n        this.editorView.setImageHandler(this.imageHandler);\n        this.imageHandler.setEditorView(this.editorView);\n        this.document.setEditorView(this.editorView);\n        this.document.setUndoRedoManager(this.undoRedoManager);\n        this.hyperlinkHandler.setUndoRedoManager(this.undoRedoManager);\n        this.linkPopupView.setCallbacks((url) => this.openLink(url), (linkElement) => this.unlinkText(linkElement));\n        this.currentAttributes = {\n            bold: false,\n            italic: false,\n            underline: false,\n            strikethrough: false,\n            undo: false,\n            redo: false,\n            hyperlink: false,\n        };\n        this.manualOverride = false;\n        this.lastPiece = null;\n        this.toolbarView.on('toolbarAction', (action, dataId = []) => this.handleToolbarAction(action, dataId));\n        this.popupToolbarView.on('popupAction', (action) => this.handleToolbarAction(action));\n        this.document.on('documentChanged', () => this.editorView.render());\n        this.document.on('documentChanged', () => {\n            var _a;\n            const htmlContent = this.document.getHtmlContent();\n            this.emit('contentChange', {\n                html: htmlContent,\n                text: ((_a = this.editorContainer) === null || _a === void 0 ? void 0 : _a.textContent) || '',\n            });\n        });\n        this.editorContainer.addEventListener('keydown', e => {\n            this.syncCurrentAttributesWithCursor();\n            this.handleKeydown(e);\n        });\n        this.editorContainer.addEventListener('keyup', () => this.syncCurrentAttributesWithCursor());\n        this.editorContainer.addEventListener('blur', () => {\n            this.hyperlinkHandler.hideHyperlinkViewButton();\n        });\n        document.addEventListener('mouseup', () => {\n            this.syncCurrentAttributesWithCursor();\n            const dataId = this.document.getAllSelectedDataIds();\n            console.log(dataId, 'dataId lntgerr');\n        });\n        document.addEventListener('selectionchange', () => {\n            const selection = window.getSelection();\n            if (!selection || selection.isCollapsed) {\n                this.document.dataIds = [];\n                this.document.selectAll = false;\n            }\n        });\n        (_a = document.getElementById('fontColor')) === null || _a === void 0 ? void 0 : _a.addEventListener('click', e => {\n            e.stopPropagation();\n            const colorWrapper = document.getElementById('colorWrapper');\n            const fontColorPicker = document.getElementById('fontColorPicker');\n            if (!colorWrapper || !fontColorPicker)\n                return;\n            const isVisible = colorWrapper.style.display === 'block';\n            if (isVisible) {\n                colorWrapper.style.display = 'none';\n            }\n            else {\n                colorWrapper.style.display = 'block';\n            }\n        });\n        (_b = document\n            .getElementById('fontColorPicker')) === null || _b === void 0 ? void 0 : _b.addEventListener('input', event => {\n            const selectedColor = event.target.value;\n            const [start, end] = this.getSelectionRange();\n            const indicator = document.getElementById('fontColorIndicator');\n            if (indicator) {\n                indicator.style.backgroundColor = selectedColor;\n            }\n            if (this.document.dataIds.length > 1) {\n                this.document.blocks.forEach((block) => {\n                    if (this.document.dataIds.includes(block.dataId)) {\n                        this.document.selectedBlockId = block.dataId;\n                        let countE = 0;\n                        block.pieces.forEach((obj) => {\n                            countE += obj.text.length;\n                        });\n                        let countS = start - countE;\n                        this.document.applyFontColor(countS, countE, selectedColor);\n                    }\n                });\n            }\n            else {\n                if (this.debounceTimer) {\n                    clearTimeout(this.debounceTimer);\n                }\n                this.debounceTimer = setTimeout(() => {\n                    this.document.applyFontColor(start, end, selectedColor);\n                }, 300);\n            }\n        });\n        (_c = document.getElementById('colorResetFont')) === null || _c === void 0 ? void 0 : _c.addEventListener('click', () => {\n            const fontColorPicker = document.getElementById('fontColorPicker');\n            const indicator = document.getElementById('fontColorIndicator');\n            if (fontColorPicker) {\n                fontColorPicker.value = '#000000';\n                if (indicator) {\n                    indicator.style.backgroundColor = '#000000';\n                }\n                fontColorPicker.dispatchEvent(new Event('input'));\n            }\n        });\n        document.addEventListener('click', e => {\n            var _a;\n            const target = e.target;\n            const colorWrapper = document.getElementById('colorWrapper');\n            const colorBgWrapper = document.getElementById('colorBgWrapper');\n            const fontColorBtn = document.getElementById('fontColor');\n            const bgColorBtn = document.getElementById('bgColor');\n            if (colorWrapper &&\n                !target.closest('#colorWrapper') &&\n                target !== fontColorBtn &&\n                !(fontColorBtn === null || fontColorBtn === void 0 ? void 0 : fontColorBtn.contains(target))) {\n                colorWrapper.style.display = 'none';\n            }\n            if (colorBgWrapper &&\n                !target.closest('#colorBgWrapper') &&\n                target !== bgColorBtn &&\n                !(bgColorBtn === null || bgColorBtn === void 0 ? void 0 : bgColorBtn.contains(target))) {\n                colorBgWrapper.style.display = 'none';\n            }\n            if (!((_a = this.editorContainer) === null || _a === void 0 ? void 0 : _a.contains(target)) &&\n                !target.closest('.hyperlink-popup')) {\n                this.hyperlinkHandler.hideHyperlinkViewButton();\n            }\n        });\n        (_d = document.getElementById('bgColor')) === null || _d === void 0 ? void 0 : _d.addEventListener('click', e => {\n            e.stopPropagation();\n            const colorBgWrapper = document.getElementById('colorBgWrapper');\n            const bgColorPicker = document.getElementById('bgColorPicker');\n            if (!colorBgWrapper || !bgColorPicker)\n                return;\n            const isVisible = colorBgWrapper.style.display === 'block';\n            if (isVisible) {\n                colorBgWrapper.style.display = 'none';\n            }\n            else {\n                colorBgWrapper.style.display = 'block';\n            }\n        });\n        (_e = document\n            .getElementById('bgColorPicker')) === null || _e === void 0 ? void 0 : _e.addEventListener('input', event => {\n            const selectedColor = event.target.value;\n            const [start, end] = this.getSelectionRange();\n            const indicator = document.getElementById('bgColorIndicator');\n            if (indicator) {\n                indicator.style.backgroundColor = selectedColor;\n            }\n            if (this.document.dataIds.length > 1) {\n                this.document.blocks.forEach((block) => {\n                    if (this.document.dataIds.includes(block.dataId)) {\n                        this.document.selectedBlockId = block.dataId;\n                        let countE = 0;\n                        block.pieces.forEach((obj) => {\n                            countE += obj.text.length;\n                        });\n                        let countS = start - countE;\n                        this.document.applyBgColor(countS, countE, selectedColor);\n                    }\n                });\n            }\n            else {\n                if (this.debounceTimer) {\n                    clearTimeout(this.debounceTimer);\n                }\n                this.debounceTimer = setTimeout(() => {\n                    this.document.applyBgColor(start, end, selectedColor);\n                }, 300);\n            }\n        });\n        (_f = document.getElementById('colorResetBG')) === null || _f === void 0 ? void 0 : _f.addEventListener('click', () => {\n            const bgColorPicker = document.getElementById('bgColorPicker');\n            const indicator = document.getElementById('bgColorIndicator');\n            if (bgColorPicker) {\n                bgColorPicker.value = '#ffffff';\n                if (indicator) {\n                    indicator.style.backgroundColor = '#ffffff';\n                }\n                bgColorPicker.dispatchEvent(new Event('input'));\n            }\n        });\n        (_g = document.getElementById('getHtmlButton')) === null || _g === void 0 ? void 0 : _g.addEventListener('click', e => {\n            const htmlString = this.document.getHtmlContent(true);\n            console.log('Editor HTML Content:', htmlString);\n            this.htmlToJsonParser = new HtmlToJsonParser(htmlString);\n            const jsonOutput = this.htmlToJsonParser.parse();\n            console.log('htmltoJson', JSON.stringify(jsonOutput, null, 2), jsonOutput);\n            this.showAcknowledgement('HTML copied to clipboard', 2000);\n        });\n        (_h = document.getElementById('loadHtmlButton')) === null || _h === void 0 ? void 0 : _h.addEventListener('click', e => {\n            this.undoRedoManager.saveUndoSnapshot();\n            const str = strings.TEST_HTML_CODE;\n            this.htmlToJsonParser = new HtmlToJsonParser(str);\n            console.log(this.htmlToJsonParser, 'this.htmlToJsonParser');\n            const jsonOutput = this.htmlToJsonParser.parse();\n            this.document.blocks = jsonOutput;\n            this.document.dataIds[0] = jsonOutput[0].dataId;\n            this.document.selectedBlockId = 'data-id-1734604240404';\n            this.document.emit('documentChanged', this);\n            const [start] = this.getSelectionRange();\n            this.document.blocks.forEach((block) => {\n                if (this.document.dataIds.includes(block.dataId)) {\n                    this.document.selectedBlockId = block.dataId;\n                    let countE = 0;\n                    block.pieces.forEach((obj) => {\n                        countE += obj.text.length;\n                    });\n                    let countS = start - countE;\n                    this.document.setFontSize(countS, countE, block.fontSize);\n                }\n            });\n            console.log('blocks', this.document.blocks, this.document.dataIds, this.document.currentOffset);\n            console.log('htmltoJson', JSON.stringify(jsonOutput, null, 2), jsonOutput);\n        });\n        (_j = document.getElementById('fontFamily')) === null || _j === void 0 ? void 0 : _j.addEventListener('change', e => {\n            this.undoRedoManager.saveUndoSnapshot();\n            const fontFamily = e.target.value;\n            const [start, end] = this.getSelectionRange();\n            if (this.document.dataIds.length > 1) {\n                this.document.blocks.forEach((block) => {\n                    if (this.document.dataIds.includes(block.dataId)) {\n                        this.document.selectedBlockId = block.dataId;\n                        let countE = 0;\n                        block.pieces.forEach((obj) => {\n                            countE += obj.text.length;\n                        });\n                        let countS = start - countE;\n                        this.document.setFontFamily(countS, countE, fontFamily);\n                    }\n                });\n            }\n            else {\n                this.document.setFontFamily(start, end, fontFamily);\n            }\n        });\n        (_k = document.getElementById('fontSize')) === null || _k === void 0 ? void 0 : _k.addEventListener('change', e => {\n            this.undoRedoManager.saveUndoSnapshot();\n            const fontSize = e.target.value;\n            const [start, end] = this.getSelectionRange();\n            if (this.document.dataIds.length > 1) {\n                this.document.blocks.forEach((block) => {\n                    if (this.document.dataIds.includes(block.dataId)) {\n                        this.document.selectedBlockId = block.dataId;\n                        let countE = 0;\n                        block.pieces.forEach((obj) => {\n                            countE += obj.text.length;\n                        });\n                        let countS = start - countE;\n                        this.document.setFontSize(countS, countE, fontSize);\n                    }\n                });\n            }\n            else {\n                this.document.setFontSize(start, end, fontSize);\n            }\n        });\n        (_l = document.getElementById('alignLeft')) === null || _l === void 0 ? void 0 : _l.addEventListener('click', () => {\n            console.log('alignment alignLeft', this.document.dataIds);\n            this.document.dataIds.forEach(obj => this.document.setAlignment('left', obj));\n        });\n        (_m = document.getElementById('alignCenter')) === null || _m === void 0 ? void 0 : _m.addEventListener('click', () => {\n            console.log('alignment alignCenter', this.document.dataIds);\n            this.document.dataIds.forEach(obj => this.document.setAlignment('center', obj));\n        });\n        (_o = document.getElementById('alignRight')) === null || _o === void 0 ? void 0 : _o.addEventListener('click', () => {\n            console.log('alignment alignRight', this.document.dataIds);\n            this.document.dataIds.forEach(obj => this.document.setAlignment('right', obj));\n        });\n        this.editorContainer.addEventListener('keydown', e => {\n            if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n                const key = e.key.toLowerCase();\n                if (['b', 'i', 'u', 'h'].includes(key)) {\n                    e.preventDefault();\n                    let action = 'b';\n                    switch (key) {\n                        case 'b':\n                            action = 'bold';\n                            break;\n                        case 'i':\n                            action = 'italic';\n                            break;\n                        case 'u':\n                            action = 'underline';\n                            break;\n                        case 'h':\n                            action = 'hyperlink';\n                            break;\n                        default:\n                            break;\n                    }\n                    this.handleToolbarAction(action);\n                }\n                if (key === 'z') {\n                    e.preventDefault();\n                    this.undoRedoManager.undo();\n                }\n                else if (key === 'y') {\n                    e.preventDefault();\n                    this.undoRedoManager.redo();\n                }\n                if (key === 'a') {\n                    const dataId = this.document.handleCtrlASelection();\n                    this.document.selectAll = true;\n                    console.log('Selected text is inside element with data-id:', dataId);\n                }\n                if (e.key === 'l') {\n                    e.preventDefault();\n                    this.document.setAlignment('left', this.document.selectedBlockId);\n                }\n                else if (e.key === 'e') {\n                    e.preventDefault();\n                    this.document.setAlignment('center', this.document.selectedBlockId);\n                }\n                else if (e.key === 'r') {\n                    e.preventDefault();\n                    this.document.setAlignment('right', this.document.selectedBlockId);\n                }\n            }\n        });\n        document.addEventListener('selectionchange', this.handleSelectionChange.bind(this));\n        this.editorContainer.addEventListener('click', (e) => {\n            const target = e.target;\n            if (target.tagName === 'A' || target.closest('a')) {\n                e.preventDefault();\n                e.stopPropagation();\n                const linkElement = (target.tagName === 'A' ? target : target.closest('a'));\n                this.showLinkPopup(linkElement, e.clientX, e.clientY);\n            }\n            else {\n                this.hideLinkPopup();\n            }\n        });\n        document.addEventListener('click', (e) => {\n            if (!this.linkPopupView.isPopup(e.target)) {\n                this.hideLinkPopup();\n            }\n        });\n        this.document.emit('documentChanged', this.document);\n        this.editorContainer.addEventListener('paste', (e) => {\n            var _a, _b;\n            this.undoRedoManager.saveUndoSnapshot();\n            e.preventDefault();\n            const html = (_a = e.clipboardData) === null || _a === void 0 ? void 0 : _a.getData('text/html');\n            const [start, end] = this.getSelectionRange();\n            if (end > start) {\n                this.document.deleteRange(start, end, this.document.selectedBlockId, this.document.currentOffset);\n            }\n            let piecesToInsert = [];\n            if (html) {\n                piecesToInsert = parseHtmlToPieces(html);\n            }\n            else {\n                const text = ((_b = e.clipboardData) === null || _b === void 0 ? void 0 : _b.getData('text/plain')) || '';\n                const segments = detectUrlsInText(text);\n                piecesToInsert = segments.map(segment => {\n                    if (segment.isUrl && segment.url) {\n                        return new Piece(segment.text, Object.assign(Object.assign({}, this.currentAttributes), { hyperlink: segment.url }));\n                    }\n                    else {\n                        return new Piece(segment.text, Object.assign({}, this.currentAttributes));\n                    }\n                });\n            }\n            let offset = start;\n            for (const p of piecesToInsert) {\n                this.document.insertAt(p.text, Object.assign({}, p.attributes), offset, this.document.selectedBlockId, 0, '', 'batch');\n                offset += p.text.length;\n            }\n            this.setCursorPosition(offset);\n        });\n        this.editorContainer.addEventListener('dragover', e => {\n            e.preventDefault();\n        });\n        this.editorContainer.addEventListener('drop', (e) => {\n            var _a, _b;\n            e.preventDefault();\n            this.undoRedoManager.saveUndoSnapshot();\n            const html = (_a = e.dataTransfer) === null || _a === void 0 ? void 0 : _a.getData('text/html');\n            const [start, end] = this.getSelectionRange();\n            if (end > start) {\n                this.document.deleteRange(start, end, this.document.selectedBlockId, this.document.currentOffset);\n            }\n            let piecesToInsert = [];\n            if (html) {\n                piecesToInsert = parseHtmlToPieces(html);\n            }\n            else {\n                const text = ((_b = e.dataTransfer) === null || _b === void 0 ? void 0 : _b.getData('text/plain')) || '';\n                piecesToInsert = [new Piece(text, Object.assign({}, this.currentAttributes))];\n            }\n            let offset = start;\n            for (const p of piecesToInsert) {\n                this.document.insertAt(p.text, Object.assign({}, p.attributes), offset, this.document.selectedBlockId, 0, '', 'batch');\n                offset += p.text.length;\n            }\n            this.setCursorPosition(offset);\n        });\n    }\n    getSelectionRange() {\n        const sel = saveSelection(this.editorView.container);\n        if (!sel)\n            return [0, 0];\n        return [sel.start, sel.end];\n    }\n    applyFontColor(color) {\n        const selection = window.getSelection();\n        if (!selection || selection.rangeCount === 0)\n            return;\n        const range = selection.getRangeAt(0);\n        const selectedText = range.toString();\n        if (!selectedText)\n            return;\n    }\n    handleToolbarAction(action, dataId = []) {\n        const [start, end] = this.getSelectionRange();\n        switch (action) {\n            case 'orderedList':\n                if (this.document.dataIds.length > 1) {\n                    this.document.toggleOrderedListForMultipleBlocks(this.document.dataIds);\n                }\n                else {\n                    const currentBlockId = this.document.selectedBlockId || this.document.dataIds[0];\n                    this.document.toggleOrderedList(currentBlockId);\n                }\n                this.document.updateOrderedListNumbers();\n                break;\n            case 'unorderedList':\n                this.document.dataIds.forEach((id) => {\n                    this.document.toggleUnorderedList(id);\n                });\n                break;\n            case 'image':\n                this.imageHandler.insertImage();\n                break;\n            default:\n                if (start < end) {\n                    this.undoRedoManager.saveUndoSnapshot();\n                    switch (action) {\n                        case 'bold':\n                            if (this.document.dataIds.length > 1) {\n                                this.document.blocks.forEach((block) => {\n                                    if (this.document.dataIds.includes(block.dataId)) {\n                                        this.document.selectedBlockId = block.dataId;\n                                        let countE = 0;\n                                        block.pieces.forEach((obj) => {\n                                            countE += obj.text.length;\n                                        });\n                                        let countS = start - countE;\n                                        this.document.toggleBoldRange(countS, countE);\n                                    }\n                                });\n                            }\n                            else {\n                                this.document.toggleBoldRange(start, end);\n                            }\n                            break;\n                        case 'italic':\n                            if (this.document.dataIds.length > 1) {\n                                this.document.blocks.forEach((block) => {\n                                    if (this.document.dataIds.includes(block.dataId)) {\n                                        this.document.selectedBlockId = block.dataId;\n                                        let countE = 0;\n                                        block.pieces.forEach((obj) => {\n                                            countE += obj.text.length;\n                                        });\n                                        let countS = start - countE;\n                                        this.document.toggleItalicRange(countS, countE);\n                                    }\n                                });\n                            }\n                            else {\n                                this.document.toggleItalicRange(start, end);\n                            }\n                            break;\n                        case 'underline':\n                            if (this.document.dataIds.length > 1) {\n                                this.document.blocks.forEach((block) => {\n                                    if (this.document.dataIds.includes(block.dataId)) {\n                                        this.document.selectedBlockId = block.dataId;\n                                        let countE = 0;\n                                        block.pieces.forEach((obj) => {\n                                            countE += obj.text.length;\n                                        });\n                                        let countS = start - countE;\n                                        this.document.toggleUnderlineRange(countS, countE);\n                                    }\n                                });\n                            }\n                            else {\n                                this.document.toggleUnderlineRange(start, end);\n                            }\n                            break;\n                        case 'strikethrough':\n                            if (this.document.dataIds.length > 1) {\n                                this.document.blocks.forEach((block) => {\n                                    if (this.document.dataIds.includes(block.dataId)) {\n                                        this.document.selectedBlockId = block.dataId;\n                                        let countE = 0;\n                                        block.pieces.forEach((obj) => {\n                                            countE += obj.text.length;\n                                        });\n                                        let countS = start - countE;\n                                        this.document.toggleStrikethroughRange(countS, countE);\n                                    }\n                                });\n                            }\n                            else {\n                                this.document.toggleStrikethroughRange(start, end);\n                            }\n                            break;\n                        case 'hyperlink':\n                            this.hyperlinkHandler.hanldeHyperlinkClick(start, end, this.document.currentOffset, this.document.selectedBlockId, this.document.blocks);\n                            break;\n                    }\n                }\n                else {\n                    this.currentAttributes[action] =\n                        !this.currentAttributes[action];\n                    this.manualOverride = true;\n                }\n                break;\n        }\n        this.toolbarView.updateActiveStates(this.currentAttributes);\n    }\n    handleSelectionChange() {\n        var _a, _b;\n        const selection = window.getSelection();\n        if (!selection ||\n            selection.rangeCount === 0 ||\n            !((_a = this.editorContainer) === null || _a === void 0 ? void 0 : _a.contains(selection.anchorNode))) {\n            this.hyperlinkHandler.hideHyperlinkViewButton();\n            this.popupToolbarView.hide();\n            return;\n        }\n        const [start] = this.getSelectionRange();\n        this.imageHandler.currentCursorLocation = start;\n        if (selection.isCollapsed) {\n            this.document.dataIds = [];\n            this.document.selectAll = false;\n            this.popupToolbarView.hide();\n        }\n        else {\n            this.document.getAllSelectedDataIds();\n            if (this.document.dataIds.length === this.document.blocks.length &&\n                this.document.blocks.length > 0) {\n                this.document.selectAll = true;\n            }\n            this.popupToolbarView.show(selection);\n        }\n        if (!selection || selection.rangeCount === 0) {\n            return;\n        }\n        if (selection && selection.isCollapsed === true) {\n            this.document.dataIds = [];\n            this.document.selectAll = false;\n        }\n        const range = selection.getRangeAt(0);\n        const parentBlock = ((_b = range.startContainer.parentElement) === null || _b === void 0 ? void 0 : _b.closest('[data-id]')) ||\n            range.startContainer;\n        if (parentBlock instanceof HTMLElement) {\n            this.document.selectedBlockId =\n                parentBlock.getAttribute('data-id') ||\n                    (range.startContainer instanceof HTMLElement\n                        ? range.startContainer.getAttribute('data-id')\n                        : null);\n        }\n        this.syncCurrentAttributesWithCursor();\n    }\n    handleKeydown(e) {\n        var _a, _b;\n        const [start, end] = this.getSelectionRange();\n        this.imageHandler.currentCursorLocation = start;\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.undoRedoManager.saveUndoSnapshot();\n            const uniqueId = `data-id-${Date.now()}`;\n            const currentBlockIndex = this.document.blocks.findIndex((block) => block.dataId === this.document.selectedBlockId);\n            const currentBlock = this.document.blocks[currentBlockIndex];\n            const lastPiece = ((_a = currentBlock === null || currentBlock === void 0 ? void 0 : currentBlock.pieces) === null || _a === void 0 ? void 0 : _a.length) > 0\n                ? currentBlock.pieces[currentBlock.pieces.length - 1]\n                : null;\n            const lastPieceAttributes = lastPiece\n                ? Object.assign({}, lastPiece.attributes) : {\n                fontFamily: 'Arial',\n                fontSize: '16px',\n                fontColor: '#000000',\n                bgColor: '#ffffff',\n                bold: false,\n                italic: false,\n                underline: false,\n                strikethrough: false,\n            };\n            if (currentBlock && currentBlock.type === 'image') {\n                this.document.blocks.splice(currentBlockIndex + 1, 0, {\n                    dataId: uniqueId,\n                    class: 'paragraph-block',\n                    pieces: [new Piece('\\u200B', lastPieceAttributes)],\n                    type: 'text',\n                });\n                this.document.emit('documentChanged', this);\n                this.imageHandler.setCursorPostion(1, uniqueId);\n            }\n            else if (currentBlock &&\n                (currentBlock.listType === 'ol' ||\n                    currentBlock.listType === 'ul' ||\n                    currentBlock.listType === 'li')) {\n                let newBlock = {\n                    dataId: uniqueId,\n                    class: 'paragraph-block',\n                    pieces: [new Piece('\\u200B', lastPieceAttributes)],\n                    type: 'text',\n                };\n                let listParentId = '';\n                if (currentBlock.listType === 'ol') {\n                    newBlock.listType = 'li';\n                    newBlock.listStart = currentBlock.listStart + 1;\n                    newBlock.parentId = currentBlock.dataId;\n                    listParentId = currentBlock.dataId;\n                }\n                else if (currentBlock.listType === 'li') {\n                    newBlock.listType = 'li';\n                    newBlock.listStart = currentBlock.listStart + 1;\n                    newBlock.parentId = currentBlock.parentId;\n                    listParentId = currentBlock.parentId;\n                }\n                else if (currentBlock.listType === 'ul') {\n                    newBlock.listType = 'ul';\n                    newBlock.parentId = currentBlock.parentId || currentBlock.dataId;\n                }\n                this.document.blocks.splice(currentBlockIndex + 1, 0, newBlock);\n                if (currentBlock.listType === 'ol' || currentBlock.listType === 'li') {\n                    for (let i = currentBlockIndex + 2; i < this.document.blocks.length; i++) {\n                        const block = this.document.blocks[i];\n                        if (block.listType === 'li' && block.parentId === listParentId) {\n                            block.listStart += 1;\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n            else {\n                const cursorBlock = this.getCurrentCursorBlock();\n                const cursorBlockId = cursorBlock === null || cursorBlock === void 0 ? void 0 : cursorBlock.toString();\n                if (cursorBlockId && currentBlock && currentBlock.type === 'text') {\n                    const cursorOffset = start - this.document.currentOffset;\n                    const beforePieces = [];\n                    const afterPieces = [];\n                    let offset = 0;\n                    for (const piece of currentBlock.pieces) {\n                        const pieceEnd = offset + piece.text.length;\n                        if (pieceEnd <= cursorOffset) {\n                            beforePieces.push(piece.clone());\n                        }\n                        else if (offset >= cursorOffset) {\n                            afterPieces.push(piece.clone());\n                        }\n                        else {\n                            const splitPoint = cursorOffset - offset;\n                            const beforeText = piece.text.slice(0, splitPoint);\n                            const afterText = piece.text.slice(splitPoint);\n                            if (beforeText) {\n                                beforePieces.push(new Piece(beforeText, Object.assign({}, piece.attributes)));\n                            }\n                            if (afterText) {\n                                afterPieces.push(new Piece(afterText, Object.assign({}, piece.attributes)));\n                            }\n                        }\n                        offset = pieceEnd;\n                    }\n                    currentBlock.pieces =\n                        beforePieces.length > 0\n                            ? beforePieces\n                            : [new Piece('\\u200B', lastPieceAttributes)];\n                    const newPieces = afterPieces.length > 0\n                        ? afterPieces\n                        : [new Piece('\\u200B', lastPieceAttributes)];\n                    const updatedBlock = this.addBlockAfter(this.document.blocks, cursorBlockId, {\n                        dataId: uniqueId,\n                        class: 'paragraph-block',\n                        pieces: newPieces,\n                        type: 'text',\n                    });\n                    this.document.blocks = updatedBlock;\n                }\n                else {\n                    this.document.blocks.push({\n                        dataId: uniqueId,\n                        class: 'paragraph-block',\n                        pieces: [new Piece('\\u200B', lastPieceAttributes)],\n                        type: 'text',\n                    });\n                }\n            }\n            this.syncCurrentAttributesWithCursor();\n            this.editorView.render();\n            this.setCursorPosition(end + 1, uniqueId);\n        }\n        else if (e.key === 'Backspace') {\n            e.preventDefault();\n            if (this.imageHandler.isImageHighlighted) {\n                const currentBlockIndex = this.document.blocks.findIndex((block) => block.dataId === this.imageHandler.highLightedImageDataId);\n                this.imageHandler.deleteImage();\n                this.imageHandler.setCursorPostion(1, this.document.blocks[currentBlockIndex - 1].dataId);\n                return;\n            }\n            const selection = window.getSelection();\n            console.log(selection, 'selection lntgerr');\n            const isAllTextSelected = this.document.selectAll ||\n                (this.document.dataIds.length === this.document.blocks.length &&\n                    this.document.dataIds.length > 0);\n            if ((isAllTextSelected || this.document.dataIds.length > 1) &&\n                !((_b = window.getSelection()) === null || _b === void 0 ? void 0 : _b.isCollapsed)) {\n                this.undoRedoManager.saveUndoSnapshot();\n                const firstDeletedId = this.document.dataIds[0];\n                const deletedIndex = this.document.blocks.findIndex((block) => block.dataId === firstDeletedId);\n                this.document.deleteBlocks();\n                let targetBlockId = null;\n                let cursorPos = 0;\n                if (this.document.blocks.length === 0) {\n                    const newId = `data-id-${Date.now()}`;\n                    this.document.blocks.push({\n                        dataId: newId,\n                        class: 'paragraph-block',\n                        pieces: [new Piece(' ')],\n                        type: 'text',\n                    });\n                    targetBlockId = newId;\n                    cursorPos = 0;\n                    this.editorView.render();\n                }\n                else if (deletedIndex < this.document.blocks.length) {\n                    targetBlockId = this.document.blocks[deletedIndex].dataId;\n                    cursorPos = 0;\n                }\n                else {\n                    const prevBlock = this.document.blocks[this.document.blocks.length - 1];\n                    targetBlockId = prevBlock.dataId;\n                    cursorPos = prevBlock.pieces.reduce((acc, p) => acc + p.text.length, 0);\n                }\n                this.setCursorPosition(cursorPos, targetBlockId);\n                return;\n            }\n            if (end > start) {\n                this.undoRedoManager.saveUndoSnapshot();\n                const adjustedOffset = Math.min(this.document.currentOffset, start);\n                this.document.deleteRange(start, end, this.document.selectedBlockId, adjustedOffset, true);\n                this.setCursorPosition(start - 1);\n                const index = this.document.blocks.findIndex((block) => block.dataId === this.document.selectedBlockId);\n                console.log(index, 'index lntgerr');\n                const chkBlock = document.querySelector(`[data-id=\"${this.document.selectedBlockId}\"]`);\n                if (chkBlock === null) {\n                    let listStart = 0;\n                    console.log(listStart, ' listStart lntgerr');\n                    const _blocks = this.document.blocks.map((block, index) => {\n                        if ((block === null || block === void 0 ? void 0 : block.listType) !== undefined || (block === null || block === void 0 ? void 0 : block.listType) !== null) {\n                            if ((block === null || block === void 0 ? void 0 : block.listType) === 'ol') {\n                                listStart = 1;\n                                block.listStart = 1;\n                            }\n                            else if ((block === null || block === void 0 ? void 0 : block.listType) === 'li') {\n                                listStart = listStart + 1;\n                                block.listStart = listStart;\n                            }\n                        }\n                        return block;\n                    });\n                    console.log(_blocks, 'blocks lntgerr');\n                    this.document.emit('documentChanged', this);\n                }\n            }\n            else if (start === end && start > 0) {\n                this.document.deleteRange(start - 1, start, this.document.selectedBlockId, this.document.currentOffset, true);\n                this.setCursorPosition(start - 1);\n            }\n        }\n        else if (e.key.length === 1 && !e.ctrlKey && !e.metaKey && !e.altKey) {\n            e.preventDefault();\n            if (end > start) {\n                this.undoRedoManager.saveUndoSnapshot();\n                this.document.deleteRange(start, end, this.document.selectedBlockId, this.document.currentOffset, false);\n            }\n            console.log('insertat', e.key, this.currentAttributes, start, this.document.selectedBlockId, this.document.currentOffset, '', '', !e.isTrusted || false);\n            this.document.insertAt(e.key, this.currentAttributes, start, this.document.selectedBlockId, this.document.currentOffset, '', '', !e.isTrusted || false);\n            this.setCursorPosition(start + 1);\n        }\n        else if (e.key === 'Delete') {\n            e.preventDefault();\n            if (start === end) {\n                this.undoRedoManager.saveUndoSnapshot();\n                if (end > start) {\n                    const adjustedOffset = Math.min(this.document.currentOffset, start);\n                    this.document.deleteRange(start, end, this.document.selectedBlockId, adjustedOffset);\n                    this.setCursorPosition(start);\n                }\n                else if (end > start) {\n                    this.undoRedoManager.saveUndoSnapshot();\n                    this.document.deleteRange(start, end, this.document.selectedBlockId);\n                    return;\n                }\n                const blockIndex = this.document.blocks.findIndex((block) => block.dataId === this.document.selectedBlockId);\n                if (blockIndex === -1)\n                    return;\n                const block = this.document.blocks[blockIndex];\n                const blockTextLength = block.pieces.reduce((acc, p) => acc + p.text.length, 0);\n                const relPos = start - this.document.currentOffset;\n                if (relPos < blockTextLength) {\n                    this.document.deleteRange(start, start + 1, this.document.selectedBlockId, this.document.currentOffset, false);\n                    this.setCursorPosition(start);\n                }\n                else if (end > start) {\n                    this.undoRedoManager.saveUndoSnapshot();\n                    this.document.deleteRange(start, end, this.document.selectedBlockId);\n                    this.setCursorPosition(start);\n                }\n            }\n            this.hyperlinkHandler.hideHyperlinkViewButton();\n        }\n    }\n    extractTextFromDataId(dataId) {\n        const selection = window.getSelection();\n        console.log('selection::', selection);\n        if (!selection || selection.rangeCount === 0) {\n            return { remainingText: '', piece: null };\n        }\n        const range = selection.getRangeAt(0);\n        const cursorNode = range.startContainer;\n        let fText = '';\n        let count = 0;\n        console.log(count, 'count lntgerr');\n        const _block = this.document.blocks.filter((block) => {\n            if (block.dataId === dataId) {\n                return block;\n            }\n        });\n        const element = document.querySelector(`[data-id=\"${dataId}\"]`);\n        const textPosition = this.document.getCursorOffsetInParent(`[data-id=\"${dataId}\"]`);\n        let _piece = [];\n        let index = 0;\n        _block[0].pieces.forEach((obj, i) => {\n            fText += obj.text;\n            if ((textPosition === null || textPosition === void 0 ? void 0 : textPosition.innerText) === obj.text) {\n                index = i;\n                _piece.push(obj);\n            }\n        });\n        if (_block[0].pieces.length > 1) {\n            _block[0].pieces.forEach((obj, i) => {\n                if (index < i) {\n                    _piece.push(obj);\n                }\n            });\n        }\n        if (!element) {\n            console.error(`Element with data-id \"${dataId}\" not found.`);\n            return { remainingText: '', piece: null };\n        }\n        if (!element.contains(cursorNode)) {\n            console.error(`Cursor is not inside the element with data-id \"${dataId}\".`);\n            return { remainingText: '', piece: null };\n        }\n        const fullText = fText;\n        const cursorOffset = textPosition === null || textPosition === void 0 ? void 0 : textPosition.offset;\n        const remainingText = fullText.slice(cursorOffset);\n        const newContent = fullText.slice(0, cursorOffset);\n        element.textContent = newContent;\n        return { remainingText: remainingText, piece: _piece };\n    }\n    getCurrentCursorBlock() {\n        const selection = window.getSelection();\n        if (!selection || selection.rangeCount === 0) {\n            return null;\n        }\n        const range = selection.getRangeAt(0);\n        const container = range.startContainer;\n        const elementWithId = container.nodeType === Node.TEXT_NODE\n            ? container.parentElement\n            : container;\n        let dataIdElement = null;\n        if (elementWithId && elementWithId instanceof Element) {\n            dataIdElement = elementWithId.closest('[data-id]');\n        }\n        return (dataIdElement === null || dataIdElement === void 0 ? void 0 : dataIdElement.getAttribute('data-id')) || null;\n    }\n    addBlockAfter(data, targetDataId, newBlock) {\n        const targetIndex = data.findIndex(block => block.dataId === targetDataId);\n        if (targetIndex === -1) {\n            console.error(`Block with dataId \"${targetDataId}\" not found.`);\n            return data;\n        }\n        const updatedData = [\n            ...data.slice(0, targetIndex + 1),\n            newBlock,\n            ...data.slice(targetIndex + 1),\n        ];\n        return updatedData;\n    }\n    syncCurrentAttributesWithCursor() {\n        var _a;\n        const [start, end] = this.getSelectionRange();\n        console.log('log1', { start: start, end: end });\n        const blockIndex = this.document.blocks.findIndex((block) => block.dataId === this.document.selectedBlockId);\n        if (((_a = this.document.blocks[blockIndex]) === null || _a === void 0 ? void 0 : _a.type) === 'image') {\n            this.imageHandler.addStyleToImage(this.document.selectedBlockId || '');\n        }\n        else {\n            if (this.imageHandler.isImageHighlighted) {\n                this.imageHandler.clearImageStyling();\n            }\n        }\n        if (start === end) {\n            const piece = this.document.findPieceAtOffset(start, this.document.selectedBlockId);\n            if (piece) {\n                if (piece !== this.lastPiece) {\n                    this.manualOverride = false;\n                    this.lastPiece = piece;\n                }\n                if (!this.manualOverride) {\n                    this.currentAttributes = {\n                        bold: piece.attributes.bold,\n                        italic: piece.attributes.italic,\n                        underline: piece.attributes.underline,\n                        strikethrough: piece.attributes.strikethrough || false,\n                        hyperlink: piece.attributes.hyperlink || false,\n                        fontFamily: piece.attributes.fontFamily,\n                        fontSize: piece.attributes.fontSize,\n                        fontColor: piece.attributes.fontColor,\n                        bgColor: piece.attributes.bgColor,\n                    };\n                    this.toolbarView.updateActiveStates(this.currentAttributes);\n                    this.popupToolbarView.updateActiveStates(this.currentAttributes);\n                }\n                this.hyperlinkHandler.hideHyperlinkViewButton();\n            }\n            else {\n                this.hyperlinkHandler.hideHyperlinkViewButton();\n                if (!this.manualOverride) {\n                    this.currentAttributes = {\n                        bold: false,\n                        italic: false,\n                        underline: false,\n                        strikethrough: false,\n                        hyperlink: false,\n                    };\n                    this.toolbarView.updateActiveStates(this.currentAttributes);\n                    this.popupToolbarView.updateActiveStates(this.currentAttributes);\n                }\n                this.lastPiece = null;\n            }\n        }\n        else {\n            this.hyperlinkHandler.hideHyperlinkViewButton();\n            const allBold = this.document.isRangeEntirelyAttribute(start, end, 'bold');\n            const allItalic = this.document.isRangeEntirelyAttribute(start, end, 'italic');\n            const allUnderline = this.document.isRangeEntirelyAttribute(start, end, 'underline');\n            const allStrikethrough = this.document.isRangeEntirelyAttribute(start, end, 'strikethrough');\n            this.currentAttributes = {\n                bold: allBold,\n                italic: allItalic,\n                underline: allUnderline,\n                strikethrough: allStrikethrough,\n                hyperlink: false,\n            };\n            this.toolbarView.updateActiveStates(this.currentAttributes);\n            this.popupToolbarView.updateActiveStates(this.currentAttributes);\n        }\n    }\n    setCursorPosition(position, dataId = '') {\n        if (dataId === '')\n            this.editorView.container.focus();\n        else {\n            const divDataid = document.querySelector('[data-id=\"' + dataId + '\"]');\n            if (divDataid) {\n                divDataid.focus();\n            }\n        }\n        const sel = window.getSelection();\n        if (!sel)\n            return;\n        const range = document.createRange();\n        let charIndex = 0;\n        const nodeStack = [this.editorView.container];\n        let node;\n        while ((node = nodeStack.pop())) {\n            if (node.nodeType === 3) {\n                const textNode = node;\n                const nextCharIndex = charIndex + textNode.length;\n                if (position >= charIndex && position <= nextCharIndex) {\n                    range.setStart(textNode, position - charIndex);\n                    range.collapse(true);\n                    break;\n                }\n                charIndex = nextCharIndex;\n            }\n            else if (node.tagName === 'BR') {\n                if (position === charIndex) {\n                    range.setStartBefore(node);\n                    range.collapse(true);\n                    break;\n                }\n                charIndex++;\n            }\n            else {\n                const el = node;\n                let i = el.childNodes.length;\n                while (i--) {\n                    nodeStack.push(el.childNodes[i]);\n                }\n            }\n        }\n        sel.removeAllRanges();\n        sel.addRange(range);\n    }\n    showAcknowledgement(message, durationMs = 2000) {\n        const existing = document.getElementById(strings.TOAST_ID);\n        if (existing) {\n            existing.remove();\n        }\n        const toast = document.createElement('div');\n        toast.id = strings.TOAST_ID;\n        toast.className = 'ti-toast';\n        toast.textContent = message || strings.TOAST_DEFAULT_MESSAGE;\n        document.body.appendChild(toast);\n        toast.offsetHeight;\n        toast.classList.add(strings.TOAST_SHOW_CLASS);\n        setTimeout(() => {\n            toast.classList.remove(strings.TOAST_SHOW_CLASS);\n            setTimeout(() => toast.remove(), 200);\n        }, durationMs || strings.TOAST_DEFAULT_DURATION_MS);\n    }\n    showLinkPopup(linkElement, x, y) {\n        this.linkPopupView.show(linkElement, x, y);\n    }\n    hideLinkPopup() {\n        this.linkPopupView.hide();\n    }\n    openLink(url) {\n        window.open(url, '_blank');\n        this.hideLinkPopup();\n    }\n    unlinkText(linkElement) {\n        this.undoRedoManager.saveUndoSnapshot();\n        const linkText = linkElement.textContent || '';\n        const documentText = this.editorView.container.textContent || '';\n        const linkIndex = documentText.indexOf(linkText);\n        if (linkIndex !== -1) {\n            this.document.formatAttribute(linkIndex, linkIndex + linkText.length, 'hyperlink', false);\n            this.editorView.render();\n        }\n        this.hideLinkPopup();\n    }\n    onContentChange(callback) {\n        this.on('contentChange', callback);\n    }\n    getContent() {\n        return this.document.getHtmlContent() || '';\n    }\n    getTextContent() {\n        var _a;\n        return ((_a = this.editorContainer) === null || _a === void 0 ? void 0 : _a.textContent) || '';\n    }\n}\nwindow.TextIgniter = TextIgniter;\nexport { TextIgniter };\n","import { TextIgniter } from '@mindfiredigital/textigniter/dist/TextIgniter.js';\r\n\r\nexport class TextIgniterComponent extends HTMLElement {\r\n  private textIgniter!: TextIgniter;\r\n  private initialized = false;\r\n  private config = {};\r\n  private template = `<div id=\"editor-container\"></div>`;\r\n\r\n  constructor() {\r\n    super();\r\n    if (!this.firstElementChild) {\r\n      this.innerHTML = this.template;\r\n    }\r\n  }\r\n\r\n  static get observedAttributes() {\r\n    return ['config'];\r\n  }\r\n\r\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\r\n    if (name === 'config' && newValue !== oldValue) {\r\n      try {\r\n        console.log(newValue);\r\n        const parsedConfig = JSON.parse(newValue);\r\n        this.config = parsedConfig;\r\n        this.initializeEditor(); // Reinitialize Core when config changes\r\n      } catch (e) {\r\n        console.error('Failed to parse config: ', e);\r\n      }\r\n    }\r\n  }\r\n\r\n  connectedCallback() {\r\n    if (this.initialized) {\r\n      return;\r\n    }\r\n    this.initializeEditor();\r\n  }\r\n\r\n  private initializeEditor() {\r\n    if (this.initialized) {\r\n      return;\r\n    }\r\n\r\n    const editorContainer = this.querySelector('#editor-container')?.id;\r\n    if (!editorContainer) {\r\n      console.error('Editor element not found inside the DOM.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.initialized = true;\r\n      this.textIgniter = new TextIgniter(\r\n        editorContainer as any,\r\n        this.config as any\r\n      );\r\n\r\n      // Subscribe to content changes and dispatch custom event\r\n      this.textIgniter.onContentChange(data => {\r\n        const event = new CustomEvent('content-change', {\r\n          detail: data,\r\n          bubbles: true,\r\n          composed: true,\r\n        });\r\n        this.dispatchEvent(event);\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to initialize TextIgniter:', error);\r\n      this.initialized = false;\r\n    }\r\n  }\r\n}\r\n\r\nif (!customElements.get('text-igniter')) {\r\n  customElements.define('text-igniter', TextIgniterComponent);\r\n}\r\n"],"mappings":"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L,UAAM,YAAY,SAAS,eAAe,GAAG,CAAC;AAAA,EAChD;AACF;;;ACvB8B,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA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","names":["block","document","document","document","document","_a","_b","index","block"]}